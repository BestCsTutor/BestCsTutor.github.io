<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Operating System代写：CIS3110 Making Your Own Shell, 留学生CS|辅导|代写">
    <meta name="description" content="用C语言实现Linux中的  Shell  工具。![Shell](https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Bash_demo.png/370px-Bash_dem">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Operating System代写：CIS3110 Making Your Own Shell | 留学生CS|辅导|代写</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 7.1.1"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">留学生CS|辅导|代写</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>辅导案例集合</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/comment" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>用户评价</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>联系我</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">留学生CS|辅导|代写</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			辅导案例集合
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/comment" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			用户评价
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			联系我
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/10.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Operating System代写：CIS3110 Making Your Own Shell</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Operating-System%E4%BB%A3%E5%86%99/">
                                <span class="chip bg-color">Operating System代写</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-08-31
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>用C语言实现Linux中的 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Shell_(computing)" title="Shell"> Shell </a> 工具。<br>![Shell](<a target="_blank" rel="noopener" href="https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Bash_demo.png/370px-">https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Bash_demo.png/370px-</a><br>Bash_demo.png)</p>
<h2 id="Requirement"><a href="#Requirement" class="headerlink" title="Requirement"></a>Requirement</h2><p>In this assignment you are required to implement a simple Linux shell program<br>in C. This assignment focuses on processes, a central building block of any<br>modern-day operating system (OS). A process is an instance of a running<br>computer program. Any modern OS provides an interface for computer users to<br>run programs. The most popular yet simple way is using a shell, which is<br>simply a program that conveniently allows you to run other programs. On “Unix-<br>like” operating systems such as Linux, a shell can be invoked through the<br>shell command in the command line interface (CLI). There are many different<br>shells in “Unix-like” OS. Among them, the top most used open source shells are<br>sh (the Bourne shell), csh (the C shell), and bash (the Bourne Again shell).<br>Read up on your favorite shell to see what it does. Note that a modern OS<br>provides graphical user interfaces (GUIs) in addition to command line<br>interfaces (CLIs) such as the shell.<br>The facilities of the operating system available to interactive users can be<br>made by a shell through a list of commands, aka shell commands. These shell<br>commands can be divided into two categories, built-in commands and external<br>programs. Built-in commands refer to the commands whose implementations are<br>built directly into the shell program, whereas external programs as its name<br>indicates, refer to these programs which exist in separate executable files,<br>like ls, which is used to list directory contents of files and directories.<br>Simply put, a shell is a command language interpreter. Specifically, when<br>started, it prompts for user input. It takes commands entered by a user from<br>the keyboard. The shell first checks if the command entered by the user is a<br>built-in command or not. If it is, the shell simply invokes the built-in<br>command implemented in the shell. Otherwise, the shell searches for the<br>executable file in a set of directories, which is usually defined by the PATH<br>environment variable. If the executable program is found in a directory, the<br>shell will execute the program. Otherwise, an error message, for example, “No<br>command ‘lsd’ found”, where lsd is the wrongly typed command, will display.<br>When the shell executes the command, it first forks a process, which is called<br>child process. The child process will load and run the program, for example,<br>by using exec call.The shell waits for the child process to complete before<br>displaying the prompt again, waiting for the next command. It will continue<br>doing so until the user types exit to close the shell. The following is an<br>example of using bash to run the ls command<br>    # ls<br>    Desktop<br>    #<br>Where the pound sign # is the shell prompt.<br>The requirements for completing this assignment successfully are described<br>under specification.</p>
<h2 id="Specification"><a href="#Specification" class="headerlink" title="Specification"></a>Specification</h2><h3 id="Shell-prompt"><a href="#Shell-prompt" class="headerlink" title="Shell prompt"></a>Shell prompt</h3><p>When your shell starts, it should display a shell prompt that contains your<br>user name and the name of the machine followed by a dollar sign. Something<br>like this:<br>    [student@ubuntu]$<br>where student is the user name and Ubuntu is the name of the machine. Note<br>that if you login as the superuser or root, the last character of your shell<br>prompt is # rather than $.<br>System calls: getuid(), gethostname()<br>Note: The system call getuid() only deals with user IDs. You need to find a<br>way to convert the user ID to the user name.</p>
<h3 id="Your-shell-must-support-the-following"><a href="#Your-shell-must-support-the-following" class="headerlink" title="Your shell must support the following"></a>Your shell must support the following</h3><ol>
<li>The internal shell command “exit” which terminates the shell.<br>Concepts: shell commands, exiting the shell<br>System calls: exit()</li>
<li>A command with no arguments<br>Example: ls<br>Details: Your shell must block until the command completes and, if the return<br>code is abnormal, print out a message to that effect.<br>Concepts: Forking a child process, waiting for it to complete, synchronous<br>execution<br>System calls: fork(), execvp(), exit(), wait()</li>
<li>A command with arguments<br>Example: ls -l<br>Details: Argument 0 is the name of the command<br>Concepts: Command-line parameters</li>
<li>A command, with or without arguments, executed in the background using &amp;.<br>For simplicity, assume that if present the &amp; is always the last thing on the<br>line.<br>Example: xemacs &amp;<br>Details: In this case, your shell must execute the command and return<br>immediately, not blocking until the command finishes.<br>Concepts: Background execution, signals, signal handlers, processes,<br>asynchronous execution<br>System calls: sigset()</li>
<li>A command, with or without arguments, whose output is redirected to a file<br>Example: <code>ls -l &gt; foo</code><br>Details: This takes the output of the command and put it in the named file<br>Concepts: File operations, output redirection<br>System calls: freopen()</li>
<li>A command, with or without arguments, whose input is redirected from a file<br>Example: <code>sort &lt; testfile</code><br>Details: This takes the named file as input to the command Concepts: Input<br>redirection, more file operations<br>System calls: freopen()</li>
</ol>
<h3 id="Your-shell-should-implement-the-following-new-commands"><a href="#Your-shell-should-implement-the-following-new-commands" class="headerlink" title="Your shell should implement the following new commands"></a>Your shell should implement the following new commands</h3><ol>
<li>A command “gcd” that finds the greatest common divisor (gcd) of two given numbers in command line (decimal or hexadecimal).<br>Example: gcd 9 0xc<br>Details: Find the gcd of two given numbers and output and output the gcd<br>Output: GCD(9, 0xc) &#x3D; 3</li>
<li>A command “args” that counts and lists command line arguments.<br>Example: args 1 2 3 4 5 “six, seven”<br>Details: count and list arguments<br>Output: argc &#x3D; 6, args &#x3D; 1, 2, 3, 4, 5, “six, seven”</li>
<li>A command “???” that is named and designed by yourself.<br>Example: you make an example<br>Details: you specify the function<br>Output: you give a sample output<br>Note: You must check and correctly handle the return values of Every system<br>call. This means that you need to read the man pages for each function to<br>figure out what the possible return values are, what errors they indicate, and<br>what you must do when you get that error.<br>Also, as for the above new commands, your implementation should be robust for<br>bad arguments! If the argument is invalid or bad, your program should print a<br>usage statement, and then exit graceful indicating an unsuccessful<br>termination. Further, your program should be robust to handle abnormal<br>situations, for example, reading non-existing files if your command needs to<br>read a file.<br>There are several parts you must pay attention to about usage statements</li>
</ol>
<ul>
<li>The usage message: it always starts with the word “usage”, followed by the program name and the names of the arguments. Argument names should be descriptive if possible, telling what the arguments refer to, like “filename” in the example below. Argument names should not contain spaces! Optional arguments are put between square brackets, like “-l” for the Linux command ls. Do not use square brackets for non-optional arguments! Always print to stderr, not to stdout, to indicate that the program has been invoked incorrectly. </li>
<li>The program name: always use <code>argv[0]</code> to refer to the program name rather than writing it out explicitly. This means that if you rename the program (which is common) you won’t have to re-write the code. </li>
<li>Exiting the program: use the exit function, which is defined in the header file <code>&lt;stdlib.h&gt;</code> . Any non-zero argument to exit (e.g. exit(1)) signals an unsuccessful completion of the program (a zero argument to exit (exit(0)) indicates successful completion of the program, but you rarely need to use exit for this). Or, you can simply use <code>EXIT_FAILURE</code> and <code>EXIT_SUCCESS</code> (which are defined in <code>&lt;stdlib.h&gt;</code> ) instead of 1 and 0 as arguments to exit.<br>For example, the following is a code snippet for the gcd command, which prints<br>a usage statement, and then exits the program by indicating an unsuccessful<br>termination<br>fprintf(stderr, “usage: %s number1 number2\n”, argv[0]);<br>exit(EXIT_FAILURE);<br>—|—</li>
</ul>
<h2 id="Skeleton"><a href="#Skeleton" class="headerlink" title="Skeleton"></a>Skeleton</h2><p>For your reference, the code skeleton is provided as a starting point for your<br>shell program.</p>
<ul>
<li>The file ish.c contains the skeleton for your shell program </li>
<li>The file lex.c contains the skeleton for parsing the input line using lex. Lex is used for compiler construction. For more information: <a target="_blank" rel="noopener" href="http://epaperpress.com/lexandyacc/thl.html"> http://epaperpress.com/lexandyacc/thl.html </a><br>Your task is to complete the above skeleton code with the appropriate c code<br>to write your own simple shell. Besides the functionalities required in this<br>assignment, an emphasis should also be placed on writing concise easy to read<br>code. Please refer to the coding style guidelines (e.g., C Programming Style<br>Guide) to provide direction regarding the format of the code you write. As the<br>program grows, you may want to improve the structure of the code by moving<br>certain parts into separate functions.<br>Note: In order to compile your source code in simple and fast way, you are<br>required to create a Makefile for building the executable file. A Makefile is<br>a recipe for the make utility how to create some file (called a target) from<br>some other files (called dependencies) using a set of commands run by the<br>shell. Please refer to the following tutorials on how to use make and write<br>Makefiles</li>
<li>Using make and writing Makefiles </li>
<li>Makefile Tutorial </li>
<li>Writing Make Files</li>
</ul>
<h2 id="Submission"><a href="#Submission" class="headerlink" title="Submission"></a>Submission</h2><ul>
<li>If you have any problems in the development of your programs, contact the teaching assistant (TA) assigned to this course. </li>
<li>You are encouraged to discuss this project with fellow students. However, you are not allowed to share code with any student. </li>
<li>Each student should submit a brief report (2-3 paragraphs) that explains your algorithm or solution strategy, any assumptions you made, and the way to run your program. </li>
<li>If your TA is unable to run&#x2F;test your program, you should present a demo arranged by your TA’s request. </li>
<li>Please only submit the source code files plus any files required to build your shell program as well as any files requested in the assignment, including <ul>
<li>the complete source code; </li>
<li>the Makefile; and </li>
<li>a writeup that explains your algorithm or solution strategy, any assumptions you made, and the way to run your program.</li>
</ul>
</li>
<li>How to name your programming assignment projects: For any assignment, zip all the files required to a zip file with name:</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">SafePoker</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://saferman.github.io/2022/08/31/OperatingSystem%E4%BB%A3%E5%86%99%EF%BC%9ACIS3110MakingYourOwnShell/">http://saferman.github.io/2022/08/31/OperatingSystem%E4%BB%A3%E5%86%99%EF%BC%9ACIS3110MakingYourOwnShell/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">SafePoker</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Operating-System%E4%BB%A3%E5%86%99/">
                                    <span class="chip bg-color">Operating System代写</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s12 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="wechat">
                        <img src="/medias/newqrcode.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/09/01/Java%E4%BB%A3%E5%86%99%EF%BC%9ACSE214iPhonypocketTelegraphSimulator/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/7.jpg" class="responsive-img" alt="Java代写：CSE214 iPhony pocket Telegraph Simulator">
                        
                        <span class="card-title">Java代写：CSE214 iPhony pocket Telegraph Simulator</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-09-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            SafePoker
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Java%E4%BB%A3%E5%86%99/">
                        <span class="chip bg-color">Java代写</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/08/27/Docker%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97(%E4%BA%8C)%EF%BC%9A%E5%9C%A8Docker%E4%B8%AD%E6%90%AD%E5%BB%BANginx%E6%9C%8D%E5%8A%A1%E5%99%A8/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/13.jpg" class="responsive-img" alt="Docker实战指南(二)：在Docker中搭建Nginx服务器">
                        
                        <span class="card-title">Docker实战指南(二)：在Docker中搭建Nginx服务器</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-08-27
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            SafePoker
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Docker%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97-%E4%BA%8C/">
                        <span class="chip bg-color">Docker实战指南(二)</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2018-2024</span>
            
            <a href="/contact" target="_blank">SafePoker</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">


    <a href="mailto:hhh@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
