<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Hardware代写：CSE237A Sensor Interaction And Real Time Scheduler, 留学生CS|辅导|代写">
    <meta name="description" content="将8个传感器连接到 [ Raspberry Pi 4 ](https://www.raspberrypi.com/products/raspberry-pi-4-model-b&amp;#x2F; “Raspberry Pi 4”) ，开发直接与它">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Hardware代写：CSE237A Sensor Interaction And Real Time Scheduler | 留学生CS|辅导|代写</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 7.1.1"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">留学生CS|辅导|代写</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>辅导案例集合</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/comment" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>用户评价</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>联系我</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">留学生CS|辅导|代写</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			辅导案例集合
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/comment" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			用户评价
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			联系我
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/15.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Hardware代写：CSE237A Sensor Interaction And Real Time Scheduler</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Hardware%E4%BB%A3%E5%86%99/">
                                <span class="chip bg-color">Hardware代写</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-02-19
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>将8个传感器连接到 [ Raspberry Pi 4 ](<a target="_blank" rel="noopener" href="https://www.raspberrypi.com/products/raspberry-">https://www.raspberrypi.com/products/raspberry-</a><br>pi-4-model-b&#x2F; “Raspberry Pi 4”) ，开发直接与它们交互的软件。<br>![Raspberry Pi 4](<a target="_blank" rel="noopener" href="https://static1.makeuseofimages.com/wordpress/wp-">https://static1.makeuseofimages.com/wordpress/wp-</a><br>content&#x2F;uploads&#x2F;2019&#x2F;06&#x2F;muo-diy-raspberrypi4-featured2.jpg)</p>
<h2 id="Requirement"><a href="#Requirement" class="headerlink" title="Requirement"></a>Requirement</h2><p>Many embedded systems have been designed to make diverse user-oriented<br>devices. For example, to design LEDs reacting music and other sensors, the<br>system has to monitor information from sensors and interact with actuators.<br>Sensing management should be executed efficiently as it is a time sensitive<br>task. In our project we will be designing a sensor platform that emulates<br>emergency detection in operating vehicles.<br>Your goal is to connect 8 sensors to RPi 4, develop software that directly<br>interacts with them and a List scheduler that manages the sensing program in<br>an energy efficient manner while not missing deadlines. These instructions<br>explain the project part 2 in two sections: (i) Sensor interaction program<br>implementation (ii) Energy-efficient List scheduler implementation.</p>
<h2 id="Hardware-and-software-requirements"><a href="#Hardware-and-software-requirements" class="headerlink" title="Hardware and software requirements"></a>Hardware and software requirements</h2><ul>
<li>Raspberry Pi 4 </li>
<li>Intel ISA, 64 bit machine (x86_64) </li>
<li>Ubuntu 64bit 20.04 LTS desktop edition <ul>
<li>You may run it as a virtual machine in VirtualBox. </li>
<li>If you are familiar with Linux and already have other Linux version (e.g., Ubuntu 16.04 LTS), you might be able to use it by adding needed repos&#x2F;packages, however, we cannot support that.</li>
</ul>
</li>
<li>ARM crosscompiler </li>
<li>Sensor kit: We will use 8 sensors from the sensor kit. The kit may include other sensors which have similar functionalities (e.g., Active buzzer vs. Passive buzzer), but you must use the same sensors specified in the next section.<br>We provide the skeleton code for this project on Canvas. Download “part2.zip”<br>under Files &gt; Projects &gt; Individual Project &gt; Part 2.<br>For this project you should follow the individual project part 1 instruction<br>to install the custom kernel.<br>In normal operation, having multiple cores could offload some of the<br>computation and improve performance. The Cortex-A72 of RPi 4 has 4 cores. By<br>default, all cores are activated:<br>$ cat &#x2F;sys&#x2F;devices&#x2F;system&#x2F;cpu&#x2F;online # should be 0-3<br>$ cat &#x2F;sys&#x2F;devices&#x2F;system&#x2F;cpu&#x2F;offline # no output - nothing is offline<br>However, this can throw off our performance measurements if we’re not sure<br>which core(s) jobs are running. Change the core usage settings so that your<br>RPi 4 uses only a single core for this project. This allows us to execute<br>programs on a single core and accurately measure performance of that core.</li>
<li>add “maxcpus&#x3D;1” in &#x2F;boot&#x2F;cmdline.txt<br>e.g., “dwc_otg, , rootwait, , plymouth.ignore-serial-consoles maxcpus&#x3D;1”</li>
<li>reboot RPi<br>$ sudo reboot</li>
<li>Go to &#x2F;sys&#x2F;devices&#x2F;system&#x2F;cpu and read two files: “online” and “offline”. Each file shows available and unavailable CPUs<br>$ cat &#x2F;sys&#x2F;devices&#x2F;system&#x2F;cpu&#x2F;online # should be 0<br>$ cat &#x2F;sys&#x2F;devices&#x2F;system&#x2F;cpu&#x2F;offline # should be 1-3<br>Now your RPi 4 uses a single core.<br>Make sure that your RPi 4 can run your sample kernel module. Check if the<br>program runs correctly using our closed-source script<br>“part2&#x2F;check_kernel_part2”.<br>$ chmod a+x .&#x2F;check_kernel_part2<br>$ sudo .&#x2F;check_kernel_part2<br>Check 1 online cores: 0 set governor: performance<br>Check 2 get scaling_cur_freq, value: 1500000<br>Check 3 get cpuinfo_cur_freq, value: 1500000 set governor: userspace<br>Check 4 set syscall max, return: 1500000<br>Check 5 set syscall min, return: 600000<br>Check 6 get scaling_cur_freq, value: 600000<br>Check 7 get cpuinfo_cur_freq, value: 600000<br>Check 8 set syscall min, return: 600000<br>Check 9 set syscall max, return: 1500000<br>Check 10 get scaling_cur_freq, value: 1500000<br>Check 11 get cpuinfo_cur_freq, value: 1500000<br>SUCCESS<br>If it prints “FAIL”, your kernel has not been updated correctly. Please make<br>sure that you configure it to use a single core as detailed above.</li>
</ul>
<h3 id="Required-sensors"><a href="#Required-sensors" class="headerlink" title="Required sensors"></a>Required sensors</h3><ul>
<li>Button Switch (KY-004) </li>
<li>2-color DIP LED </li>
<li>Module (KY-011) </li>
<li>Metal Touch Sensor (KY-036) </li>
<li>Rotary Encoder (KY-040) </li>
<li>Passive Buzzer (KY-006) </li>
<li>Flashing LED Module (KY-034) </li>
<li>Tilt Sensor (KY-020) </li>
<li>3-color SMD LED </li>
<li>Module (KY-009)</li>
</ul>
<h2 id="Section-1-Sensor-interaction-program-implementation"><a href="#Section-1-Sensor-interaction-program-implementation" class="headerlink" title="Section 1. Sensor interaction program implementation"></a>Section 1. Sensor interaction program implementation</h2><p>We will be designing a system that will provide feedback via interactive LEDs.<br>You will be able to turn on and off the system, and your code will monitor<br>sensors and actuate the LEDs as described below:</p>
<ol>
<li>Once the program starts, the system is in the running state:<br>* a. The auto-flash LED turns on.<br>* b. The two-color DIP LED is <ul>
<li>i. Green color if the metal touch sensor is not touched </li>
<li>ii. Red color if the metal touch sensor is touched</li>
</ul>
</li>
<li>The passive buzzer* beeps for 0.5 second if the tilt sensor detects a tilt </li>
<li>SMD RGB LED state depends on both the rotary encoder and the obstacle avoidance sensor </li>
<li>If the button is pushed in the running state, the system enters in the pause state:<br>* a. The auto-flash LED turns off<br>* b. Both the DIP and SMD LEDs turn off </li>
<li>If the button is pushed in the pause state, the system reverts back to the running state, i.e., (1)</li>
</ol>
<h3 id="1-1-Interfacing-individual-sensors"><a href="#1-1-Interfacing-individual-sensors" class="headerlink" title="1.1 Interfacing individual sensors"></a>1.1 Interfacing individual sensors</h3><p>The RPi 4 provides multiple General Purpose Input&#x2F;Output (GPIO) connectors for<br>sensors. You will connect the sensors to the GPIO pins, and implement a user-<br>space program using WiringPi library which supports GPIO communication. It<br>should be installed by default with Raspbian Buster. If not, get it using<br>these instructions: <a target="_blank" rel="noopener" href="http://wiringpi.com/download-and-install/"> http://wiringpi.com/download-and-install/
</a><br>Then, you can check how each GPIO pin number corresponds to the WiringPi pin<br>number as follows:<br>    $ gpio readall<br>Note that the WiringPi (“wPi” column) numbers are different from the physical<br>GPIO (“Physical” column) pin numbers.<br>If you get the following error, you need to upgrade your WiringPi for<br>Raspberry Pi 4B:<br>Oops - unable to determine board type… model: 17<br>Complete the update with the following commands:<br>    $ cd &#x2F;tmp<br>    $ wget <a target="_blank" rel="noopener" href="https://project-downloads.drogon.net/wiringpi-latest.deb">https://project-downloads.drogon.net/wiringpi-latest.deb</a><br>    $ sudo dpkg -i wiringpi-latest.deb<br>Use “gpio -v” to check the version of WiringPi and make sure it is higher than<br>or equal to version 2.52.<br>Here is how you can test the sensors:</p>
<h4 id="Step-1-Connect-a-sensor-to-proper-GPIO-pins"><a href="#Step-1-Connect-a-sensor-to-proper-GPIO-pins" class="headerlink" title="Step 1: Connect a sensor to proper GPIO pins"></a>Step 1: Connect a sensor to proper GPIO pins</h4><ul>
<li>a. A sensor has at least 2 pins. For example, an auto-flash LED sensor has two pins, one for ground (0V) and the other for input signal (0&#x2F;5V). Some sensors (e.g., buzzer) may have 3 pins, one for ground (0V), another one for 5V power, and the other one for an input signal (0&#x2F;5V). For more detailed guidelines for pins, please refer to the included manual in the sensor kit, or by simply searching the sensor part number online. </li>
<li>b. Be careful to connect the power pins of sensors&#x2F;RPi 4 (0&#x2F;5V) correctly. You should turn off the RPi 4 to avoid any unexpected problems while working. Some sensors are sensitive to wrong voltage connections (e.g., 5V supply for a ground pin), and may break if mistakes are made while connected to power. </li>
<li>c. As long as the voltage requirements are met, you may use any of the GPIO pin assignments to connect your other sensors pins. In the next section (1.2), you will be required to use the given pin assignments (specified in “assignment1.h”). </li>
<li>d. The sensors of the Sunfounder kit already have required resistors. For example, an auto-flash LED sensor already has its own resistor to properly work. </li>
<li>e. The sensitivity of some sensors (e.g. microphone sensors) can be adjusted with a potentiometer on the sensor module. A red LED should be on when the sensor is powered on. A second LED will turn on when the sensing threshold is triggered. Decrease the triggering threshold by rotating the potentiometer in a clockwise direction. </li>
<li>f. The RPi 4 does not support analog inputs&#x2F;outputs on their GPIO. To connect analog sensors you would need an ADC (analog-to-digital convertor). We do not cover analog sensing in this project.</li>
</ul>
<h4 id="Step-2-Implement-a-sensor-test-program-in-the-following-manner"><a href="#Step-2-Implement-a-sensor-test-program-in-the-following-manner" class="headerlink" title="Step 2: Implement a sensor test program in the following manner"></a>Step 2: Implement a sensor test program in the following manner</h4><ul>
<li>a. Initialize sensor interfaces before reading&#x2F;sending digital signals. </li>
<li>b. Access&#x2F;control a PIN’s inputs and outputs. The following sample code “test.c” controls an LED.<br>#include &lt;wiringPi.h&gt;<br>#include &lt;stdio.h&gt;<br>#define LEDPin 0<br>int main(void) {<br>  if (wiringPiSetup() &#x3D;&#x3D; -1) {<br>&#x2F;&#x2F; if the wiringPi initialization fails, print error message<br>printf(“setup wiringPi failed !”);<br>return 1;<br>  }<br>  pinMode(LEDPin, OUTPUT);<br>  while (1) {<br>digitalWrite(LEDPin, LOW);   &#x2F;&#x2F; led off<br>printf(“led off…\n”);<br>delay(500);<br>digitalWrite(LEDPin, HIGH);  &#x2F;&#x2F; led on<br>printf(“…led on\n”);<br>delay(500);<br>  }<br>  return 0;<br>}<br>—|—</li>
</ul>
<p>Some hints:</p>
<ul>
<li>The RPi 4 does not support analog inputs, but you can use Pulse Width Modulated (PWM) digital signals instead, to control the multi-color LEDs ( <a target="_blank" rel="noopener" href="http://wiringpi.com/reference/software-pwm-library/"> http://wiringpi.com/reference/software-pwm-library/ </a> ), e.g.:<br>softPwmCreate(PIN_RED, 0, 0xFF);<br>softPwmWrite(PIN_RED, 0xC8);<br>—|—  </li>
<li>The millis() function in WiringPi can obtain a timestamp in milliseconds which can help you keep track of the elapsed time without calling delay&#x2F;sleep functions ( <a target="_blank" rel="noopener" href="http://wiringpi.com/reference/timing/"> http://wiringpi.com/reference/timing/ </a> ). </li>
<li>The rotary encoder uses two pins to determine the direction of rotation. Specifically, when pin A changes state, whether pin B’s output is equal to pin A indicates two rotating directions. Check the following tutorial for more details: <a target="_blank" rel="noopener" href="https://lastminuteengineers.com/rotary-encoder-arduino-tutorial/"> https://lastminuteengineers.com/rotary-encoder-arduino-tutorial/ </a> . Debouncing is not required - you should be able to obtain stable direction detection if you rotate slowly.</li>
</ul>
<h4 id="Step-3-Build-the-sensor-test-program"><a href="#Step-3-Build-the-sensor-test-program" class="headerlink" title="Step 3: Build the sensor test program"></a>Step 3: Build the sensor test program</h4><p>Build option 1: Compile on RPi 4 with WiringPi<br>Use gcc with the WiringPi library on RPi 4:<br>    $ gcc test.c -o test -lwiringPi<br>Build option 2: Cross-compile in Ubuntu with WiringPi<br>To cross-compile programs with the wiringPi library, you also need a cross-<br>compiled version of WiringPi library.<br>We provide the precompiled library and header files for RPi 4 on Canvas.</p>
<ol>
<li>Place the downloaded directory “part2&#x2F;wiringPi_armhf” in “~&#x2F;RPdev&#x2F;“ directory in your VM. </li>
<li>Using the downloaded files, you can cross-compile the program that uses wiringPi. For example, the above example can be cross-compiled as follows (one line, with a space after -lwiringPi):<br>$ arm-linux-gnueabihf-gcc test.c -o test -lwiringPi<br>-I&#x2F;home&#x2F;YOUR_ACCOUNT&#x2F;RPdev&#x2F;wiringPi_armhf&#x2F; -L&#x2F;home&#x2F;YOUR_ACCOUNT&#x2F;RPdev&#x2F;wiringPi_armhf&#x2F;</li>
</ol>
<h4 id="Step-4-Execute-the-test-program-s"><a href="#Step-4-Execute-the-test-program-s" class="headerlink" title="Step 4: Execute the test program(s)"></a>Step 4: Execute the test program(s)</h4><p>Test each sensor prior to proceeding. Pay particular attention to the HIGH&#x2F;LOW<br>values described in <a target="_blank" rel="noopener" href="https://tkkrlab.nl/wiki/Arduino_37_sensors"> https://tkkrlab.nl/wiki/Arduino_37_sensors
</a> for each sensor, as they dictate<br>how to use it. To execute the program binary, you need the root privilege.<br>    $ sudo .&#x2F;test</p>
<h3 id="1-2-Sensor-interaction-program-with-skeleton-code"><a href="#1-2-Sensor-interaction-program-with-skeleton-code" class="headerlink" title="1.2 Sensor interaction program (with skeleton code)"></a>1.2 Sensor interaction program (with skeleton code)</h3><p>Implement the program based on a skeleton C code that we provide in<br>“part2&#x2F;section1”. It has 5 files:</p>
<table>
<thead>
<tr>
<th>File name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>main_section1.c</td>
<td>The main() function of the program. Do not modify it.</td>
</tr>
<tr>
<td>assignment1.h</td>
<td>The source code you need to implement for sensor</td>
</tr>
<tr>
<td>interactions.</td>
<td></td>
</tr>
<tr>
<td>assignment1.c</td>
<td>You will modify and SUBMIT them.</td>
</tr>
<tr>
<td>Makefile.host</td>
<td>A Makefile for cross compiling (You need to modify a path in</td>
</tr>
<tr>
<td>the Makefile)</td>
<td></td>
</tr>
<tr>
<td>Makefile.rp</td>
<td>A Makefile for native compile (i.e., on RPi 4)</td>
</tr>
<tr>
<td>If you are compiling on the RPi 4, rename “Makefile.rp” to “Makefile”:</td>
<td></td>
</tr>
</tbody></table>
<pre><code>$ cp Makefile.rp Makefile
</code></pre>
<p>If you are cross-compiling:<br>    $ cp Makefile.host Makefile<br>After make, execute as follows:<br>    $ sudo .&#x2F;main_section1<br>Stop the program when it’s executing by pressing “Ctrl+c” in the terminal.<br>The code controls the 8 sensors using 8 different threads.</p>
<ol>
<li>The main() function of “main_section1.c” executes following steps:<br>* a. Initialize wiringPi and call other initialization functions<br>* b. Create 8 threads corresponded to each sensor<br>* c. Wait until all threads are finished<br>* d. Delay 10 milliseconds, and execute again the step (b) in a loop </li>
<li>Pin assignments of the sensors are already specified in assignment1.h as macros. You must use these specified numbers, as this is how we test your code. (e.g., #define PIN_BUTTON 0) </li>
<li>During initialization, it calls the init_shared_variable() and init_sensor() functions. For any other data initialization, you can implement the function bodies in assignment1.c. (e.g., Initial INPUT&#x2F;OUTPUT mode of the WiringPi pins) </li>
<li>Upon execution, each created thread will call the function, body_SENSORNAME(). You need to implement body_SENSORNAME() functions in assignment1.c. </li>
<li>The “SharedVariable” argument is provided to init_shared_variable() and the 8 body_SENSORNAME() functions. This variable, a C structure, is shared across all function calls and threads. You can extend this data structure as needed. </li>
<li>If you want to terminate the program by finishing the main loop, you can set the value of SharedVariable-]bProgramExit to 1. See “assignment1.c” for an existing example.<br>The following will ensure that your implementation can be graded correctly:</li>
</ol>
<h4 id="DOs"><a href="#DOs" class="headerlink" title="DOs"></a>DOs</h4><ol>
<li>Complete the following functions in “assignment1.c”. Implement each body_SENSORNAME() function to control only the corresponding sensor. For example, body_button() function has to access and control only the “button sensor” with PIN_BUTTON, not the “big audio sensor”.<br>void init_shared_variable(SharedVariable* sv);<br>void init_sensors(SharedVariable* sv);<br>void body_button(SharedVariable* sv); &#x2F;&#x2F; Button<br>void body_big(SharedVariable* sv); &#x2F;&#x2F; Big audio sensor<br>void body_encoder(SharedVariable* sv); &#x2F;&#x2F; Rotary encoder<br>void body_obstacle(SharedVariable* sv); &#x2F;&#x2F; Obstacle avoidance sensor<br>void body_twocolor(SharedVariable* sv); &#x2F;&#x2F; DIP two-color LED<br>void body_rgbcolor(SharedVariable* sv); &#x2F;&#x2F; SMD RGB LED<br>void body_aled(SharedVariable* sv); &#x2F;&#x2F; Auto-flash LED<br>void body_buzzer(SharedVariable* sv); &#x2F;&#x2F; Buzzer<br>—|—<br>Add more variables in the “SharedVariable” structure if needed.</li>
</ol>
<h4 id="DON’Ts"><a href="#DON’Ts" class="headerlink" title="DON’Ts"></a>DON’Ts</h4><ol>
<li>Do not submit the main file (main_section1.c). This file should not be modified and your implementation must work correctly using the original file. </li>
<li>Do not modify the WiringPi PIN numbers. Use the predefined pin numbers for the compatibility of other RPi 4 (we test your code on the TA’s RPi 4). </li>
<li>Do not modify the given function declarations. For example, if you modify “void init_sensors(SharedVariable <em>sv);” to “void init_sensors(SharedVariable</em> sv, int SOME);”, it will not be correctly executed with the provided original main file. </li>
<li>Do not implement any code that involves ANSI locking (e.g. pthread_mutex) and delay&#x2F;sleep functions. This could potentially invalidate the scheduler project in Section 2.</li>
</ol>
<h3 id="Section-1-In-Person-Checkpoint-Demo"><a href="#Section-1-In-Person-Checkpoint-Demo" class="headerlink" title="Section 1 In-Person Checkpoint Demo"></a>Section 1 In-Person Checkpoint Demo</h3><p>Demo your sensor interaction program to the TA. This is a sanity check for<br>you, as your sensor interaction program will need to be correctly implemented<br>to finish the project part 2. Bring to the demo:</p>
<ul>
<li>Your RPi 4 with your working sensor interaction program </li>
<li>Your sensors, connected to your RPi 4 and ready to run with your program<br>Build and run your sensor program with an unmodified version of<br>“main_section1.c”. The TA will test the various sensing and actuation<br>scenarios.</li>
</ul>
<h2 id="Section-2-Energy-efficient-List-scheduler-implementation"><a href="#Section-2-Energy-efficient-List-scheduler-implementation" class="headerlink" title="Section 2. Energy-efficient List scheduler implementation"></a>Section 2. Energy-efficient List scheduler implementation</h2><p>Implement an energy-efficient List real-time scheduler to run sensors and<br>actuators along with workloads that have to be executed during sensor access<br>(e.g. sensor ramp-up, preprocessing, etc.). In Project Part 1, you already<br>observed that the CPU frequency can be used to lower the energy cost of<br>workload execution.</p>
<h3 id="2-1-Prepare-your-environment"><a href="#2-1-Prepare-your-environment" class="headerlink" title="2.1 Prepare your environment"></a>2.1 Prepare your environment</h3><ol>
<li>Verify your RPi 4 settings<br>The RPi 4 must use the custom kernel from Project Part 1. The RPi 4 must use<br>only a single core.</li>
<li>Change default boot option to text console<br>Since you will implement a real-time scheduler, your system should execute<br>minimal additional processes. Since the window manager and graphical user<br>interface (GUI) run a number of threads, you should limit the RPi 4 to<br>terminal mode only. If you are using GUI as the default boot option, change<br>the boot option to the text console using raspi-config:<br>* $ sudo raspi-config<br>* Select “System Options &gt; Boot &#x2F; Auto Login”<br>* Select “Console”<br>* Select “Finish” and reboot your system<br>If you want to start the GUI again:<br>$ startx<br>Then to return to text console, log out.<br>When executing the user-space scheduler program that you will implement,<br>always use the text console.</li>
</ol>
<h3 id="2-2-Download-base-code-and-infrastructure-for-scheduler"><a href="#2-2-Download-base-code-and-infrastructure-for-scheduler" class="headerlink" title="2.2 Download base code and infrastructure for scheduler"></a>2.2 Download base code and infrastructure for scheduler</h3><p>The Linux system does not by default support any hard real-time scheduling<br>mechanism. Instead, we provide the base code that can schedule threads in a<br>user space program with frequency controls. Implement and submit four files<br>“assignment1.h”, “assignment1.c”, “assignment2.h” and “assignment2.c”.</p>
<h4 id="Step-1-Download-the-skeleton-C-code-that-we-provide-in-“part2-section2”"><a href="#Step-1-Download-the-skeleton-C-code-that-we-provide-in-“part2-section2”" class="headerlink" title="Step 1. Download the skeleton C code that we provide in “part2&#x2F;section2”"></a>Step 1. Download the skeleton C code that we provide in “part2&#x2F;section2”</h4><p>We provided the precompiled “scheduler.o” and “workload.o” files as objects<br>without the source.<br>We provided three standard workloads in directories “LOW”, “MED”, and “HIGH”<br>for your local test set:<br>    $ ls LOW MED HIGH<br>    LOW: deadlines.c workload.o<br>    MED: deadlines.c workload.o<br>    HIGH: deadlines.c workload.o<br>As indicated by the directory’s name, workload LOW is the easiest; workload<br>MED is of medium difficulty; and workload HIGH is the most challenging. Your<br>code performance grade will be based on the ranking of your implementation as<br>compared with everyone else in the class. The quality of your implementation<br>depends on minimizing the number of missed deadlines and making the scheduler<br>energy efficient. The scheduler that has no missed deadline and is the most<br>energy efficient will get the highest score for this section. Missing<br>deadlines will result in a lower grade; the implementations with a similar<br>number of missed deadlines will be further compared in terms of the energy<br>efficiency.<br>Your code will be run on the TA’s RPi and tested using standard workloads and<br>two unknown workloads. The unknown workloads will not be more difficult than<br>the HIGH workload.<br>Important: Your code performance grade will depend on</p>
<h4 id="Step-2-Compile-the-provided-source-code"><a href="#Step-2-Compile-the-provided-source-code" class="headerlink" title="Step 2. Compile the provided source code"></a>Step 2. Compile the provided source code</h4><p>Compile the program using the provided Makefile. If you want to cross-compile,<br>change the path in the Makefile appropriately.<br>    $ make # or on a host: <code>make CROSS\_COMPILE=arm-linux-gnueabihf-</code><br>You can see the three compiled binaries: main_section2_low, main_section2_med,<br>and main_section2_high. They were compiled using the three different<br>workloads. If you want to compile an individual binary, you can use:<br>    $ make low<br>    $ make med<br>    $ make high</p>
<h4 id="Step-3-Optional"><a href="#Step-3-Optional" class="headerlink" title="Step 3 (Optional)"></a>Step 3 (Optional)</h4><p>If you would like to test more workloads, you can download additional<br>workloads at this link.<br>You will need to input your PID and download “workload.zip”. The workload is<br>automatically generated, so every student may get a different workload set.<br>The additional workloads will be of similar difficulty as the standard<br>workload 2 and 3.</p>
<h3 id="2-3-Description-of-scheduler-base-code"><a href="#2-3-Description-of-scheduler-base-code" class="headerlink" title="2.3 Description of scheduler base code"></a>2.3 Description of scheduler base code</h3><p>Let’s take a look at how the provided code works. Using this, you can<br>implement a soft real-time scheduler. In the same way you did in the sensor<br>interaction program implementation, this program creates 8 threads for sensor<br>interaction.</p>
<h4 id="Worker-thread-and-virtual-workload"><a href="#Worker-thread-and-virtual-workload" class="headerlink" title="Worker thread and virtual workload"></a>Worker thread and virtual workload</h4><p>Since the actual interaction for each sensor of the sensor kit is typically<br>executed in a very short time, we assume that there are 8 virtual workloads<br>which precede each sensing interaction function. For example, if a sensor that<br>needs a non-trivial access time, preprocessing, and setup&#x2F;hold for ADC<br>conversion. The provided base code mimics this concept, so the virtual<br>workload, and subsequently, sensor access, may take hundreds of milliseconds<br>to execute. Once each thread (which will be scheduled) is executed,<br>“workload_SENSORNAME()” function and “body_SENSORNAME()” function are executed<br>one by one. We will call this thread the worker thread.</p>
<ul>
<li>The virtual workload is defined as “workload_SENSORNAME()” in “workload.h” and “workload.o”. The actual sensor interaction (i.e., “body_SENSORNAME()” function) will be based on your section 1 implementation. </li>
<li>Execution of the workloads need to satisfy the dependency graph, defined in “deadlines.c”. </li>
<li>For the actual implementation of the thread function, check out the “thread_def” macro in “main_section2.c”.</li>
</ul>
<h4 id="Scheduler-thread"><a href="#Scheduler-thread" class="headerlink" title="Scheduler thread"></a>Scheduler thread</h4><p>After initialization, the main thread of the base code plays a role for the<br>scheduler thread. It calls three functions repeatedly in a loop. (See main()<br>function in “main_section2.c” file.)</p>
<ol>
<li>prepare_tasks() (closed-source in “scheduler.o”)<br>* a. This function is responsible for checking the period and creating the 8 worker threads. <ul>
<li>i. The created worker thread is not executed until it is selected by select_task() function. (see below) <ul>
<li>b. The deadline of each thread is the same as the period.</li>
</ul>
</li>
<li>i. If all worker threads are executed completely, it waits until a worker thread’s execution is triggered again according to its period. <ul>
<li>c. For your convenience, this function also checks and reports missing deadlines (if any)</li>
</ul>
</li>
<li>i. It only reports the first 100 errors.</li>
</ul>
</li>
<li>select_task()<br>* a. You NEED TO IMPLEMENT this function in assignment2.c.<br>* b. It needs to implement a scheduling algorithm, and return a TaskSelection structure (defined in “scheduler.h”) including a selected task and a requested frequency. </li>
<li>execute_task() (closed-source in “scheduler.o”)<br>* a. Given the TaskSelection structure, this function checks task dependencies and reports dependency violations (if any).<br>* b. If the selected worker thread is available and meets the dependency requirement, this function executes the selected worker thread at the requested frequency.<br>The selected worker thread is executed as follows:</li>
</ol>
<ul>
<li>If task dependencies are met and the worker thread is available, the thread selected by execute_task() is guaranteed to be executed for 10 milliseconds after scheduled, or until it finishes, whichever comes first. Once a worker thread is executed for 10 ms (or finishes), prepare_task() is executed again and another (or same) thread can be selected in select_task(). </li>
<li>If the selected thread finishes execution within the allotted 10 milliseconds, it terminates immediately and goes back to the loop of the scheduler thread.<br>You also need to consider the following facts when you’re designing your<br>scheduler:</li>
<li>Even if a worker thread misses its deadline, it is not terminated immediately but still schedulable. In this situation, the scheduler considers that the deadline is missed, and doesn’t create a new worker thread. You may want to schedule such threads with higher priority. </li>
<li>The closed-source part of prepare_task() and execute_task() is implemented so that they run in a very short time. </li>
<li>The worker threads may not be created exactly at their periods. They may have a small delay (at most 10 ms due to the allotted time slot). More specifically, the worker thread is only created when the scheduler thread is first encountered in prepare_task(). The real-time availability of the worker threads are recorded by aliveTasks array (see below).</li>
</ul>
<h4 id="Program-execution-with-adjustable-run-time"><a href="#Program-execution-with-adjustable-run-time" class="headerlink" title="Program execution with adjustable run time"></a>Program execution with adjustable run time</h4><p>When executing the program, you can adjust the running time of the experiment<br>by the program parameter. If the time is not specified, the scheduler will be<br>executed for 10 seconds.<br>    $ sudo .&#x2F;main_section2_low <time in seconds><br>Note again that you should test other workloads, using “.&#x2F;main_section2_med”<br>and “.&#x2F;main_section2_high”.</p>
<h3 id="2-4-Energy-efficient-List-scheduler-implementation"><a href="#2-4-Energy-efficient-List-scheduler-implementation" class="headerlink" title="2.4 Energy-efficient List scheduler implementation"></a>2.4 Energy-efficient List scheduler implementation</h3><p>Implement an energy-efficient List scheduler in “assignment2.c” file, which<br>considers periodic dependent tasks and uses a single core. To get full credit<br>for the coding part, you need to implement a List scheduler using the length<br>of the longest path that this task belongs to (i.e., the number of tasks on<br>this longest path) as the priority metric. The longer the path, the higher the<br>priority. For two tasks with the same priority, schedule the one with an<br>earlier deadline. More sophisticated scheduler design is welcome for a better<br>performance, as long as you explain the implementation details in your report.<br>You should implement two functions:</p>
<ol>
<li>void learn_workloads(struct shared_variable* sv);<br>This function is called when initializing the program. It will be the location<br>where you will initialize everything you need for your scheduler. More<br>importantly, you can characterize the workload of each worker thread here,<br>such as the execution time of each worker thread.</li>
</ol>
<ul>
<li>Parameters <ul>
<li>The shared variable sv is the same one of Section 1. You may expand it for your purpose.</li>
</ul>
</li>
<li>What you should know: <ul>
<li>You may use the “get_current_time_us()” function defined in scheduler.h. It gives the microseconds since the epoch. </li>
<li>If required, you can reuse the PMU implementation from Project Part 1 here to profile the 8 worker threads with their workloads. </li>
<li>You may change the CPU frequency using “set_by_min_freq()” and “set_by_max_freq()” <ul>
<li>They are defined in “governor.h&#x2F;.c”. </li>
<li>To minimize the I&#x2F;O time to change the frequency, “governor.c&#x2F;.h” uses a custom system call that is part of your custom kernel.</li>
</ul>
</li>
<li>The deadline (&#x3D;scheduling period) of each worker thread is defined by workloadDeadlines in “deadlines.c” as an 8-element array. The deadlines are represented in microseconds. <ul>
<li>The index of the array corresponding to each worker thread is defined in “workload.h”.</li>
</ul>
</li>
<li>The task dependencies are defined by workloadDependencies in “deadlines.c” as an 8-by-8 matrix. “workloadDependencies[i][j] &#x3D; 1” means that task i depends on task j, i.e., task j has to be finished before task i can be executed. Such dependencies are checked before executing the selected task in “execute_task()”. </li>
<li>There is no loop in the task dependencies, but there could be one task depending on multiple other tasks, or multiple tasks depending on a single other task. </li>
<li>If you want to estimate more accurate execution time in actual scheduling, you may need to consider the execution time of the scheduler thread as well.</li>
</ul>
</li>
</ul>
<ol>
<li>TaskSelection select_task(struct shared_variable <em>sv, const int</em> aliveTasks, long long idleTime);<br>This function is called while the scheduler thread is executing. You need to<br>implement the List scheduler with a frequency control. Your function<br>eventually has to return a proper worker thread to be executed with a proper<br>frequency using the TaskSelection structure. As a sample scheduler, we provide<br>a naive round-robin scheduler in the skeleton code.</li>
</ol>
<ul>
<li>Parameters <ul>
<li>The shared variable sv is the same one we used in Section 1. </li>
<li>aliveTasks is an 8-integer array which represents which worker threads are currently schedulable. If an element of the array is 1, it means the corresponding thread is still alive, so schedulable. Once a worker thread is finished, the element is set to 0. <ul>
<li>For example, if BUTTON and BUZZER threads are still alive, then aliveTasks &#x3D; {1, 0, 0, 0, 0, 0, 0, 1}. </li>
<li>The flipping history of aliveTasks indicates when one worker thread is finished or newly created. For example, when aliveTasks[i] switches from 1 (alive) to 0 (not alive), it means that task i is finished for the current round. When aliveTasks[i] switches from 0 to 1, it means that task i is newly created and needs to be scheduled before the next period ends.</li>
</ul>
</li>
<li>idleTime gives a time duration in microseconds. When all tasks are completely scheduled, the scheduler thread (prepare_task() function) waits for the next period without any workload. This variable gives the idle time. You will need this variable to compute the energy consumption.</li>
</ul>
</li>
<li>Returns <ul>
<li>The return variable, TaskSelection structure, has two fields: <ul>
<li>int task: Scheduled task (0~7: Index of the selected worker thread) <ul>
<li>If you want to skip the current slot and stay idle, you can return -1 and execute_task() will directly move to the next loop.</li>
</ul>
</li>
<li>int freq: Applied CPU frequency (0: Low frequency, 1: High frequency)</li>
</ul>
</li>
</ul>
</li>
<li>What you should know: <ul>
<li>You may record the task status to help manage dependencies <ul>
<li>Before executing the selected thread, execute_task() checks whether the required precedent tasks have been finished in the current round. If dependency is not satisfied, the worker thread will not be executed in “execute_task()” and an error will be reported. Once a worker thread finishes, the task dependency status is updated timely (closed-source in “scheduler.o”). </li>
<li>To meet the dependency, all precedent tasks need to be finished in the current round. In other words, the execution times of precedent tasks should be greater than the selected task.</li>
</ul>
</li>
<li>You may use the “get_scheduler_elapsed_time_us()” function to get the time passed since each scheduling task began. (i.e., the timer is started from the first prepare_task() call.) </li>
<li>You don’t need to use the functions that control CPU frequency inside of this function. <ul>
<li>The frequency is already changed by execute_task() function based on the returned TaskSelection structure. If you change it again inside this function, it may degrade the scheduler performance.</li>
</ul>
</li>
<li>A rule of thumb is that you have to implement this function in a performance-efficient way. It’s a part of the scheduler thread, so any delay of this function consumes the scheduling times repeatedly. </li>
<li>Do not use any file IO or interruptible function call here. <ul>
<li>It may result in unexpected scheduler behavior or system blocking. Please remember again that it’s a part of the scheduler which must be executed quickly.</li>
</ul>
</li>
<li>To avoid IO operations, you must use the “printDBG()” function instead of “printf()” function. <ul>
<li>The printDBG() function is provided as a part of the base code. (see scheduler.h) </li>
<li>The usage is the same as that of printf(). It stores the printed lines into a memory buffer, and the buffer is flushed when the program is finished. </li>
<li>The memory buffer size is initialized to 128 MB at default. You can adjust the buffer size in main_section2.c: init_deferred_buffer() function.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-5-Report-on-scheduler-design-and-results-with-actual-sensor"><a href="#2-5-Report-on-scheduler-design-and-results-with-actual-sensor" class="headerlink" title="2.5 Report on scheduler design and results with actual sensor"></a>2.5 Report on scheduler design and results with actual sensor</h3><p>implementation</p>
<ul>
<li>Briefly explain how you implemented the sensor interaction program in Section 1. </li>
<li>Carefully explain how you designed and implemented your energy efficient scheduler. You may want to clarify the following aspects: <ul>
<li>How you implement learn_workloads() </li>
<li>How you implement select_task() </li>
<li>How you compute the weighted mobility metric </li>
<li>How you select the proper in the weighted mobility metric </li>
<li>How you make your scheduler energy-efficient</li>
</ul>
</li>
<li>Provide a table for the three provided workloads. The table should contain the estimated energy and the result if the scheduler was missing the deadline or not.<br>Use the table below to calculate the CPU energy values:<table>
<thead>
<tr>
<th>CPU Frequency</th>
<th>Power (Total when active)</th>
<th>Power (Idle)</th>
</tr>
</thead>
<tbody><tr>
<td>1.5 GHz</td>
<td>1400 mW</td>
<td>50 mW</td>
</tr>
<tr>
<td>600 MHz</td>
<td>500 mW</td>
<td>50 mW</td>
</tr>
<tr>
<td>The active power is the total power consumption while any workload is working.</td>
<td></td>
<td></td>
</tr>
<tr>
<td>The idle power is the power consumption while no workload is working. The idle</td>
<td></td>
<td></td>
</tr>
<tr>
<td>time is provided in the third parameter of the select_task() function.</td>
<td></td>
<td></td>
</tr>
<tr>
<td>What to do for common error messages (in particular “file not found” &#x2F;</td>
<td></td>
<td></td>
</tr>
<tr>
<td>“command not found”)</td>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li>Google your error first </li>
<li>Are you on the right machine? </li>
<li>Are you in the right directory? </li>
<li>Is your PATH variable set correctly? (In ~&#x2F;.bashrc?) </li>
<li>Did you need sudo? </li>
<li>If you’re trying to run a binary - is it executable? </li>
<li>If you’re trying to access an external device - is your external drive mounted correctly? </li>
<li>Do you have the right packages&#x2F;dependencies? (Especially if it’s a *.h file that’s missing)<br>Asking for help on Piazza:</li>
<li>The best posts are public, including your last commands, the full error message, and a description of your hardware&#x2F;OS environment. “It does not work” is not a sufficient post for us to help you. You must state clearly what you tried, and what indicates a failure (e.g. exact error message, LED lights, blank screen, etc). </li>
<li>If someone makes a suggestion that works for you, please report back! </li>
<li>If you figure it out on your own, please report back! </li>
<li>“I solved it” or “I made a mistake” is usually not a helpful end to the discussion. Don’t be embarrassed by your simple mistakes - we all make them. Please describe the solution and help the next person out!</li>
</ul>
<h2 id="Individual-Project-Submission-Instructions"><a href="#Individual-Project-Submission-Instructions" class="headerlink" title="Individual Project Submission Instructions"></a>Individual Project Submission Instructions</h2><p>Submit the following via Gradescope:</p>
<ul>
<li>Submit the four files “assignment1.c, assignment1.h, assignment2.c, and assignment2.h” <ul>
<li>Don’t submit other source files. </li>
<li>Your code must be executed correctly using the predefined wiringPi PIN numbers and the provided other files. </li>
<li>Make sure to comment out any printf&#x2F;printDBG&#x2F;delay functions during debugging in all submitted, as your code will be tested directly on the TA’s RPi4 for performance evaluation.</li>
</ul>
</li>
<li>Report <ul>
<li>Maximum 3pgs, 12pt Times New Roman font, excluding figures and table. </li>
<li>Briefly explain how you implemented the sensor interaction program in Section 1 </li>
<li>Carefully explain how you designed your energy efficient scheduler </li>
<li>Provide a table for the three provided workloads. The table should contain the estimated energy and the result if the scheduler was missing the deadline or not </li>
<li>Do not include your source code in the report.</li>
</ul>
</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">SafePoker</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://saferman.github.io/2021/02/19/Hardware%E4%BB%A3%E5%86%99%EF%BC%9ACSE237ASensorInteractionAndRealTimeScheduler/">http://saferman.github.io/2021/02/19/Hardware%E4%BB%A3%E5%86%99%EF%BC%9ACSE237ASensorInteractionAndRealTimeScheduler/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">SafePoker</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Hardware%E4%BB%A3%E5%86%99/">
                                    <span class="chip bg-color">Hardware代写</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s12 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="wechat">
                        <img src="/medias/newqrcode.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/02/20/OpenMP%E4%BB%A3%E5%86%99%EF%BC%9ACS484MatrixTranspose/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/9.jpg" class="responsive-img" alt="OpenMP代写：CS484 Matrix Transpose">
                        
                        <span class="card-title">OpenMP代写：CS484 Matrix Transpose</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-02-20
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            SafePoker
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/OpenMP%E4%BB%A3%E5%86%99/">
                        <span class="chip bg-color">OpenMP代写</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/02/18/Security%E4%BB%A3%E5%86%99%EF%BC%9ACS588AttackingRSA/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/13.jpg" class="responsive-img" alt="Security代写：CS588 Attacking RSA">
                        
                        <span class="card-title">Security代写：CS588 Attacking RSA</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-02-18
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            SafePoker
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Security%E4%BB%A3%E5%86%99/">
                        <span class="chip bg-color">Security代写</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2018-2024</span>
            
            <a href="/contact" target="_blank">SafePoker</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">


    <a href="mailto:hhh@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
