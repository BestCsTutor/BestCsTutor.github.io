<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Java代写：CS61B Gitlet, 留学生CS|辅导|代写">
    <meta name="description" content="实现一个类似  Git  的服务Gitlet,包含Git的基本版本管理功能。![Git](https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/Git_operations.sv">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Java代写：CS61B Gitlet | 留学生CS|辅导|代写</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 7.1.1"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">留学生CS|辅导|代写</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>辅导案例集合</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/comment" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>用户评价</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>联系我</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">留学生CS|辅导|代写</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			辅导案例集合
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/comment" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			用户评价
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			联系我
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/4.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Java代写：CS61B Gitlet</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Java%E4%BB%A3%E5%86%99/">
                                <span class="chip bg-color">Java代写</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-04-20
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>实现一个类似 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Git" title="Git"> Git </a> 的服务Gitlet,<br>包含Git的基本版本管理功能。<br>![Git](<a target="_blank" rel="noopener" href="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/Git_operations.svg/220px-">https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/Git_operations.svg/220px-</a><br>Git_operations.svg.png)</p>
<h2 id="Overview-of-Gitlet"><a href="#Overview-of-Gitlet" class="headerlink" title="Overview of Gitlet"></a>Overview of Gitlet</h2><p>In this project you’ll be implementing a version-control system that mimics<br>some of the basic features of the popular system Git. Ours is smaller and<br>simpler, however, so we have named it Gitlet.<br>A version-control system is essentially a backup system for related<br>collections of files. The main functionality that Gitlet supports is:</p>
<ol>
<li>Saving the contents of entire directories of files. In Gitlet, this is called committing, and the saved contents themselves are called commits. </li>
<li>Restoring a version of one or more files or entire commits. In Gitlet, this is called checking out those files or that commit. </li>
<li>Viewing the history of your backups. In Gitlet, you view this history in something called the log. </li>
<li>Maintaining related sequences of commits, called branches. </li>
<li>Merging changes made in one branch into another.<br>The point of a version-control system is to help you when creating complicated<br>(or even not-so-complicated) projects, or when collaborating with others on a<br>project. You save versions of the project periodically. If at some later point<br>in time you accidentally mess up your code, then you can restore your source<br>to a previously committed version (without losing any of the changes you made<br>since then). If your collaborators make changes embodied in a commit, you can<br>incorporate (merge) these changes into your own version.<br>In Gitlet, you don’t just commit individual files at a time. Instead, you can<br>commit a coherent set of files at the same time. We like to think of each<br>commit as a snapshot of your entire project at one point in time. However, for<br>simplicity, many of the examples in the remainder of this document involve<br>changes to just one file at a time. Just keep in mind you could change<br>multiple files in each commit.<br>In this project, it will be helpful for us to visualize the commits we make<br>over time. Suppose we have a project consisting just of the file wug.txt, we<br>add some text to it, and commit it. Then we modify the file and commit these<br>changes. Then we modify the file again, and commit the changes again. Now we<br>have saved three total versions of this file, each one later in time than the<br>previous. We can visualize these commits like so:<br>Here we’ve drawn an arrow indicating that each commit contains some kind of<br>reference to the commit that came before it. We call the commit that came<br>before it the parent committhis will be important later. But for now, does<br>this drawing look familiar? That’s right; it’s a linked list!<br>The big idea behind Gitlet is that we can visualize the history of the<br>different versions of our files in a list like this. Then it’s easy for us to<br>restore old versions of files. You can imagine making a command like: “Gitlet,<br>please revert to the state of the files at commit #2”, and it would go to the<br>second node in the linked list and restore the copies of files found there,<br>while removing any files that are in the first node, but not the second.<br>If we tell Gitlet to revert to an old commit, the front of the linked list<br>will no longer reflect the current state of your files, which might be a<br>little misleading. In order to fix this problem, we introduce something called<br>the head pointer. The head pointer keeps track of where in the linked list we<br>currently are. Normally, as we make commits, the head pointer will stay at the<br>front of the linked list, indicating that the latest commit reflects the<br>current state of the files:<br>However, let’s say we revert to the state of the files at commit #2<br>(technically, this is the reset command, which you’ll see later in the spec).<br>We move the head pointer back to show this.<br>All right, now, if this were all Gitlet could do, it would be a pretty simple<br>system. But Gitlet has one more trick up its sleeve: it doesn’t just maintain<br>older and newer versions of files, it can maintain differing versions. Imagine<br>you’re coding a project, and you have two ideas about how to proceed: let’s<br>call one Plan A, and the other Plan B. Gitlet allows you to save both<br>versions, and switch between them at will. Here’s what this might look like,<br>in our pictures.<br>Two versions<br>It’s not really a linked list anymore. It’s more like a tree. We’ll call this<br>thing the commit tree. Keeping with this metaphor, each of the separate<br>versions is called a branch of the tree. You can develop each version<br>separately.<br>There are two pointers into the tree, representing the furthest point of each<br>branch. At any given time, only one of these is the currently active pointer,<br>and this is what’s called the head pointer. The head pointer is the pointer at<br>the front of the current branch.<br>That’s it for our brief overview of the Gitlet system! Don’t worry if you<br>don’t fully understand it yet; the section above was just to give you a high<br>level picture of what its meant to do. A detailed spec of what you’re supposed<br>to do for this project follows this section.<br>But a last word here: commit trees are immutable: once a commit node has been<br>created, it can never be destroyed (or changed at all). We can only add new<br>things to the commit tree, not modify existing things. This is an important<br>feature of Gitlet! One of Gitlet’s goals is to allow us to save things so we<br>don’t delete them accidentally.</li>
</ol>
<h2 id="Internal-Structures"><a href="#Internal-Structures" class="headerlink" title="Internal Structures"></a>Internal Structures</h2><p>Real Git distinguishes several different kinds of objects. For our purposes,<br>the important ones are</p>
<ul>
<li>blobs: Essentially the contents of files. </li>
<li>trees: Directory structures mapping names to references to blobs and other trees (subdirectories). </li>
<li>commits: Combinations of log messages, other metadata (commit date, author, etc.), a reference to a tree, and references to parent commits. The repository also maintains a mapping from branch heads (in this course, we’ve used names like master, proj2, etc.) to references to commits, so that certain important commits have symbolic names.<br>We will simplify from Git still further by</li>
<li>Incorporating trees into commits and not dealing with subdirectories (so there will be one “flat” directory of plain files for each repository). </li>
<li>Limiting ourselves to merges that reference two parents (in real Git, there can be any number of parents.) </li>
<li>Having our metadata consist only of a timestamp and log message. A commit, therefore, will consist of a log message, timestamp, a mapping of file names to blob references, a parent reference, and (for merges) a second parent reference.<br>Every object every blob and every commit in our case has a unique integer id<br>that serves as a reference to the object. An interesting feature of Git is<br>that these ids are universal: unlike a typical Java implementation, two<br>objects with exactly the same content will have the same id on all systems. In<br>the case of blobs, “same content” means the same file contents. In the case of<br>commits, it means the same metadata, the same mapping of names to references,<br>and the same parent reference. The objects in a repository are thus said to be<br>content addressable.<br>Both Git and Gitlet accomplish this the same way: by using a cryptographic<br>hash function called SHA-1 (Secure Hash 1), which produces a 160-bit integer<br>hash from any sequence of bytes. Cryptographic hash functions have the<br>property that it is extremely difficult to find two different byte streams<br>with the same hash value (or indeed to find any byte stream given just its<br>hash value), so that essentially, we may assume that the probability that any<br>two objects with different contents have the same SHA-1 hash value is 2-160 or<br>about 10-48. Basically, we simply ignore the possibility of a hashing<br>collision, so that the system has, in principle, a fundamental bug that in<br>practice never occurs!<br>Fortunately, there are library classes for computing SHA-1 values, so you<br>won’t have to deal with the actual algorithm. All you have to do is to make<br>sure that you correctly label all your objects. In particular, this involves</li>
<li>Including all metadata and references when hashing a commit. </li>
<li>Distinguishing somehow between hashes for commits and hashes for blobs. A good way to do so is to hash in an extra word for each object that has one value for blobs and another for commits.<br>By the way, the SHA-1 hash value, rendered as a 40-character hexadecimal<br>string, makes a convenient file name for storing your data in your .gitlet<br>directory (more on that below). It also gives you a convenient way to compare<br>two files (blobs) to see if they have the same contents: if their SHA-1s are<br>the same, we simply assume the files are the same.<br>For remotes (like origin and shared, which we’ve been using all semester),<br>we’ll simply use other Gitlet repositories. Pushing simply means copying all<br>commits and blobs that the remote repository does not yet have to the remote<br>repository, and resetting a branch reference. Pulling is the same, but in the<br>other direction<br>Reading and writing your internal objects from and to files is actually pretty<br>easy, thanks to Java’s serialization facilities. The interface<br>java.io.Serializable has no methods, but if a class implements it, then the<br>Java runtime will automatically provide a way to convert to and from a stream<br>of bytes, which you can then write to a file using the I&#x2F;O class<br>java.io.ObjectOutputStream and read back (and deserialize) with<br>java.io.ObjectInputStream. The term “serialization” refers to the conversion<br>from some arbitrary structure (array, tree, graph, etc.) to a serial sequence<br>of bytes.<br>Here is a summary example of the structures discussed in this section. As you<br>can see, each commit (rectangle) points to some blobs (circles), which contain<br>file contents. The commits contain the file names and references to these<br>blobs, as well as a parent link. These references, depicted as arrows, are<br>represented in the .gitlet directory using their SHA-1 hash values (the small<br>hexadecimal numerals above the commits and below the blobs). The newer commit<br>contains an updated version of wug1.txt, but shares the same version of<br>wug2.txt as the older commit.</li>
</ul>
<h2 id="Detailed-Spec-of-Behavior"><a href="#Detailed-Spec-of-Behavior" class="headerlink" title="Detailed Spec of Behavior"></a>Detailed Spec of Behavior</h2><h3 id="Overall-Spec"><a href="#Overall-Spec" class="headerlink" title="Overall Spec"></a>Overall Spec</h3><p>The only structure requirement we’re giving you is that you have a class named<br>gitlet.Main and that it has a main method. Here’s your skeleton code for this<br>project (in package Gitlet):<br>    public class Main {<br>      public static void main(String[] args) {<br>        &#x2F;&#x2F; FILL IN<br>      }<br>    }<br>—|—<br>We are also giving you some utility methods for performing a number of mostly<br>file-system-related tasks, so that you can concentrate on the logic of the<br>project rather than the peculiarities of dealing with the OS.<br>You may, of course, write additional Java classes to support your projectin<br>fact, please do. But don’t use any external code (aside from JUnit), and don’t<br>use any programming language other than Java. You can use all of the Java<br>Standard Library that you wish, plus utilities we provide.<br>The majority of this spec will describe how Gitlet.java’s main method must<br>react when it receives various gitlet commands as command-line arguments. But<br>before we break down command-by-command, here are some overall guidelines the<br>whole project should satisfy:</p>
<ul>
<li>In order for Gitlet to work, it will need a place to store old copies of files and other metadata. All of this stuff must be stored in a directory called .gitlet, just as this information is stored in directory .git for the real git system (files with a . in front are hidden files. You will not be able to see them by default on most operating systems. On Unix, the command ls -a will show them.) A Gitlet system is considered “initialized” in a particular location if it has a .gitlet directory there. Most Gitlet commands (except for the init command) only need to work when used from a directory where a Gitlet system has been initializedi.e. a directory that has a .gitlet directory. The files that aren’t in your .gitlet directory (which are copies of files from the repository that you are using and editing, as well as files you plan to add to the repository) are referred to as the files in your working directory. </li>
<li>Most commands have runtime or memory usage requirements. You must follow these. Some of the runtimes are described as constant “relative to any significant measure”. The significant measures are: any measure of number or size of files, any measure of number of commits. You can ignore time required to serialize or deserialize, with the one caveat that your serialization time cannot depend in any way on the total size of files that have been added, committed, etc (what is serialization? You’ll see later in the spec). You can also pretend that getting from a hash table is constant time. </li>
<li>Some commands have failure cases with a specified error message. The exact formats of these are specified later in the spec. All error message end with a period; since our autograding is literal, be sure to include it. If your program ever encounters one of these failure cases, it must print the error message and not change anything else. You don’t need to handle any other error cases except the ones listed as failure cases. </li>
<li>There are some failure cases you need to handle that don’t apply to a particular command. Here they are: <ul>
<li>If a user doesn’t input any arguments, print the message Please enter a command. and exit. </li>
<li>If a user inputs a command that doesn’t exist, print the message No command with that name exists. and exit. </li>
<li>If a user inputs a command with the wrong number or format of operands, print the message Incorrect operands. and exit. </li>
<li>If a user inputs a command that requires being in an initialized Gitlet working directory (i.e., one containing a .gitlet subdirectory), but is not in such a directory, print the message Not in an initialized Gitlet directory.</li>
</ul>
</li>
<li>Some of the commands have their differences from real Git listed. The spec is not exhaustive in listing all differences from git, but it does list some of the bigger or potentially confusing and misleading ones. </li>
<li>Do NOT print out anything except for what the spec says. Some of our autograder tests will break if you print anything more than necessary. </li>
<li>Always exit with exit code 0, even in the presence of errors. This allows us to use other exit codes as an indication that something blew up. </li>
<li>The spec classifies some commands as “dangerous”. Dangerous commands are ones that potentially overwrite files (that aren’t just metadata)for example, if a user tells Gitlet to restore files to older versions, Gitlet may overwrite the current versions of the files. Just FYI.</li>
</ul>
<h2 id="The-Commands"><a href="#The-Commands" class="headerlink" title="The Commands"></a>The Commands</h2><h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><ul>
<li>Usage: java gitlet.Main init </li>
<li>Description: Creates a new Gitlet version-control system in the current directory. This system will automatically start with one commit: a commit that contains no files and has the commit message initial commit (just like that, with no punctuation). It will have a single branch: master, which initially points to this initial commit, and master will be the current branch. The timestamp for this initial commit will be 00:00:00 UTC, Thursday, 1 January 1970 in whatever format you choose for dates (this is called “The (Unix) Epoch”, represented internally by the time 0.) Since the initial commit in all repositories created by Gitlet will have exactly the same content, it follows that all repositories will automatically share this commit (they will all have the same UID) and all commits in all repositories will trace back to it. </li>
<li>Runtime: Should be constant relative to any significant measure. </li>
<li>Failure cases: If there is already a Gitlet version-control system in the current directory, it should abort. It should NOT overwrite the existing system with a new one. Should print the error message A Gitlet version-control system already exists in the current directory. </li>
<li>Dangerous?: No </li>
<li>Our line count: ~25</li>
</ul>
<h3 id="add"><a href="#add" class="headerlink" title="add"></a>add</h3><ul>
<li>Usage: java gitlet.Main add [file name] </li>
<li>Description: Adds a copy of the file as it currently exists to the staging area (see the description of the commit command). For this reason, adding a file is also called staging the file for addition. Staging an already-staged file overwrites the previous entry in the staging area with the new contents. The staging area should be somewhere in .gitlet. If the current working version of the file is identical to the version in the current commit, do not stage it to be added, and remove it from the staging area if it is already there (as can happen when a file is changed, added, and then changed back). The file will no longer be staged for removal (see gitlet rm), if it was at the time of the command. </li>
<li>Runtime: In the worst case, should run in linear time relative to the size of the file being added and lgN, for N the number of files in the commit. </li>
<li>Failure cases: If the file does not exist, print the error message File does not exist. and exit without changing anything. </li>
<li>Dangerous?: No </li>
<li>Our line count: ~20</li>
</ul>
<h3 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h3><ul>
<li>Usage: java gitlet.Main commit [message] </li>
<li>Description: Saves a snapshot of certain files in the current commit and staging area so they can be restored at a later time, creating a new commit. The commit is said to be tracking the saved files. By default, each commit’s snapshot of files will be exactly the same as its parent commit’s snapshot of files; it will keep versions of files exactly as they are, and not update them. A commit will only update the contents of files it is tracking that have been staged for addition at the time of commit, in which case the commit will now include the version of the file that was staged instead of the version it got from its parent. A commit will save and start tracking any files that were staged for addition but weren’t tracked by its parent. Finally, files tracked in the current commit may be untracked in the new commit as a result being staged for removal by the rm command (below).<br>The bottom line: By default a commit is the same as its parent. Files staged<br>for addition and removal are the updates to the commit.<br>Some additional points about commit:</li>
<li>The staging area is cleared after a commit. </li>
<li>The commit command never adds, changes, or removes files in the working directory (other than those in the .gitlet directory). The rm command will remove such files, as well as staging them for removal, so that they will be untracked after a commit. </li>
<li>Any changes made to files after staging for addition or removal are ignored by the commit command, which only modifies the contents of the .gitlet directory. For example, if you remove a tracked file using the Unix rm command (rather than Gitlet’s command of the same name), it has no effect on the next commit, which will still contain the deleted version of the file. </li>
<li>After the commit command, the new commit is added as a new node in the commit tree. </li>
<li>The commit just made becomes the “current commit”, and the head pointer now points to it. The previous head commit is this commit’s parent commit. </li>
<li>Each commit should contain the date and time it was made. </li>
<li>Each commit has a log message associated with it that describes the changes to the files in the commit. This is specified by the user. The entire message should take up only one entry in the array args that is passed to main. To include multiword messages, you’ll have to surround them in quotes. </li>
<li>Each commit is identified by its SHA-1 id, which must include the file (blob) references of its files, parent reference, log message, and commit time. </li>
<li>Runtime: Runtime should be constant with respect to any measure of number of commits. Runtime must be no worse than linear with respect to the total size of files the commit is tracking. Additionally, this command has a memory requirement: Committing must increase the size of the .gitlet directory by no more than the total size of the files staged for addition at the time of commit, not including additional metadata. This means don’t store redundant copies of versions of files that a commit receives from its parent. You are allowed to save whole additional copies of files; don’t worry about only saving diffs, or anything like that. </li>
<li>Failure cases: If no files have been staged, abort. Print the message No changes added to the commit. Every commit must have a non-blank message. If it doesn’t, print the error message Please enter a commit message. It is not a failure for tracked files to be missing from the working directory or changed in the working directory. Just ignore everything outside the .gitlet directory entirely. </li>
<li>Dangerous?: No </li>
<li>Differences from real git: In real git, commits may have multiple parents (due to merging) and also have considerably more metadata. </li>
<li>Our line count: ~35</li>
</ul>
<h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><ul>
<li>Usage: java gitlet.Main rm [file name] </li>
<li>Description: Unstage the file if it is currently staged for addition. If the file is tracked in the current commit, stage it for removal and remove the file from the working directory if the user has not already done so (do not remove it unless it is tracked in the current commit). </li>
<li>Runtime: Should run in constant time relative to any significant measure. </li>
<li>Failure cases: If the file is neither staged nor tracked by the head commit, print the error message No reason to remove the file. </li>
<li>Dangerous?: Yes (although if you use our utility methods, you will only hurt your repository files, and not all the other files in your directory.) </li>
<li>Our line count: ~20</li>
</ul>
<h3 id="log"><a href="#log" class="headerlink" title="log"></a>log</h3><ul>
<li>Usage: java gitlet.Main log </li>
<li><h1 id="Description-Starting-at-the-current-head-commit-display-information-about-each-commit-backwards-along-the-commit-tree-until-the-initial-commit-following-the-first-parent-commit-links-ignoring-any-second-parents-found-in-merge-commits-In-regular-Git-this-is-what-you-get-with-git-log-–first-parent-This-set-of-commit-nodes-is-called-the-commit’s-history-For-every-node-in-this-history-the-information-it-should-display-is-the-commit-id-the-time-the-commit-was-made-and-the-commit-message-Here-is-an-example-of-the-exact-format-it-should-follow"><a href="#Description-Starting-at-the-current-head-commit-display-information-about-each-commit-backwards-along-the-commit-tree-until-the-initial-commit-following-the-first-parent-commit-links-ignoring-any-second-parents-found-in-merge-commits-In-regular-Git-this-is-what-you-get-with-git-log-–first-parent-This-set-of-commit-nodes-is-called-the-commit’s-history-For-every-node-in-this-history-the-information-it-should-display-is-the-commit-id-the-time-the-commit-was-made-and-the-commit-message-Here-is-an-example-of-the-exact-format-it-should-follow" class="headerlink" title="Description: Starting at the current head commit, display information about each commit backwards along the commit tree until the initial commit, following the first parent commit links, ignoring any second parents found in merge commits. (In regular Git, this is what you get with git log –first-parent). This set of commit nodes is called the commit’s history. For every node in this history, the information it should display is the commit id, the time the commit was made, and the commit message. Here is an example of the exact format it should follow: "></a>Description: Starting at the current head commit, display information about each commit backwards along the commit tree until the initial commit, following the first parent commit links, ignoring any second parents found in merge commits. (In regular Git, this is what you get with git log –first-parent). This set of commit nodes is called the commit’s history. For every node in this history, the information it should display is the commit id, the time the commit was made, and the commit message. Here is an example of the exact format it should follow: </h1><h1 id="commit-a0da1ea5a15ab613bf9961fd86f010cf74c7ee48Date-Thu-Nov-9-20-00-05-2017-0800A-commit-message"><a href="#commit-a0da1ea5a15ab613bf9961fd86f010cf74c7ee48Date-Thu-Nov-9-20-00-05-2017-0800A-commit-message" class="headerlink" title="commit a0da1ea5a15ab613bf9961fd86f010cf74c7ee48Date: Thu Nov 9 20:00:05 2017 -0800A commit message."></a>commit a0da1ea5a15ab613bf9961fd86f010cf74c7ee48<br>Date: Thu Nov 9 20:00:05 2017 -0800<br>A commit message.</h1><h1 id="commit-3e8bf1d794ca2e9ef8a4007275acf3751c7170ffDate-Thu-Nov-9-17-01-33-2017-0800Another-commit-message"><a href="#commit-3e8bf1d794ca2e9ef8a4007275acf3751c7170ffDate-Thu-Nov-9-17-01-33-2017-0800Another-commit-message" class="headerlink" title="commit 3e8bf1d794ca2e9ef8a4007275acf3751c7170ffDate: Thu Nov 9 17:01:33 2017 -0800Another commit message."></a>commit 3e8bf1d794ca2e9ef8a4007275acf3751c7170ff<br>Date: Thu Nov 9 17:01:33 2017 -0800<br>Another commit message.</h1><h1 id="commit-e881c9575d180a215d1a636545b8fd9abfb1d2bbDate-Wed-Dec-31-16-00-00-1969-0800initial-commitThere-is-a-before-each-commit-and-an-empty-line-after-it-As-in-real-Git-each-entry-displays-the-unique-SHA-1-id-of-the-commit-object-The-timestampsdisplayed-in-the-commits-reflect-the-current-timezone-not-UTC-as-a-result-the-timestamp-for-the-initial-commit-does-not-read-Thursday-January-1st-1970-00-00-00-but-rather-the-equivalent-Pacific-Standard-Time-Displaycommits-with-the-most-recent-at-the-top-By-the-way-you’ll-find-that-the-Javaclasses-java-util-Date-and-java-util-Formatter-are-useful-for-getting-andformatting-times-Look-into-them-instead-of-trying-to-construct-it-manuallyyourself-For-merge-commits-those-that-have-two-parent-commits-add-a-line-just-belowthe-first-as-in"><a href="#commit-e881c9575d180a215d1a636545b8fd9abfb1d2bbDate-Wed-Dec-31-16-00-00-1969-0800initial-commitThere-is-a-before-each-commit-and-an-empty-line-after-it-As-in-real-Git-each-entry-displays-the-unique-SHA-1-id-of-the-commit-object-The-timestampsdisplayed-in-the-commits-reflect-the-current-timezone-not-UTC-as-a-result-the-timestamp-for-the-initial-commit-does-not-read-Thursday-January-1st-1970-00-00-00-but-rather-the-equivalent-Pacific-Standard-Time-Displaycommits-with-the-most-recent-at-the-top-By-the-way-you’ll-find-that-the-Javaclasses-java-util-Date-and-java-util-Formatter-are-useful-for-getting-andformatting-times-Look-into-them-instead-of-trying-to-construct-it-manuallyyourself-For-merge-commits-those-that-have-two-parent-commits-add-a-line-just-belowthe-first-as-in" class="headerlink" title="commit e881c9575d180a215d1a636545b8fd9abfb1d2bbDate: Wed Dec 31 16:00:00 1969 -0800initial commitThere is a &#x3D;&#x3D;&#x3D; before each commit and an empty line after it. As in real Git,each entry displays the unique SHA-1 id of the commit object. The timestampsdisplayed in the commits reflect the current timezone, not UTC; as a result,the timestamp for the initial commit does not read Thursday, January 1st,1970, 00:00:00, but rather the equivalent Pacific Standard Time. Displaycommits with the most recent at the top. By the way, you’ll find that the Javaclasses java.util.Date and java.util.Formatter are useful for getting andformatting times. Look into them instead of trying to construct it manuallyyourself!For merge commits (those that have two parent commits), add a line just belowthe first, as in"></a>commit e881c9575d180a215d1a636545b8fd9abfb1d2bb<br>Date: Wed Dec 31 16:00:00 1969 -0800<br>initial commit<br>There is a &#x3D;&#x3D;&#x3D; before each commit and an empty line after it. As in real Git,<br>each entry displays the unique SHA-1 id of the commit object. The timestamps<br>displayed in the commits reflect the current timezone, not UTC; as a result,<br>the timestamp for the initial commit does not read Thursday, January 1st,<br>1970, 00:00:00, but rather the equivalent Pacific Standard Time. Display<br>commits with the most recent at the top. By the way, you’ll find that the Java<br>classes java.util.Date and java.util.Formatter are useful for getting and<br>formatting times. Look into them instead of trying to construct it manually<br>yourself!<br>For merge commits (those that have two parent commits), add a line just below<br>the first, as in</h1>commit 3e8bf1d794ca2e9ef8a4007275acf3751c7170ff<br>Merge: 4975af1 2c1ead1<br>Date: Sat Nov 11 12:30:00 2017 -0800<br>Merged development into master.<br>where the two hexadecimal numerals following “Merge:” consist of the first<br>seven digits of the first and second parents’ commit ids, in that order. The<br>first parent is the branch you were on when you did the merge; the second is<br>that of the merged-in branch. This is as in regular Git.</li>
<li>Runtime: Should be linear with respect to the number of nodes in head’s history. </li>
<li>Failure cases: None </li>
<li>Dangerous?: No </li>
<li>Our line count: ~20<br>Here’s a picture of the history of a particular commit. If the current<br>branch’s head pointer happened to be pointing to that commit, log would print<br>out information about the circled commits<br>The history ignores other branches and the future. Now that we have the<br>concept of history, let’s refine what we said earlier about the commit tree<br>being immutable. It is immutable precisely in the sense that the history of a<br>commit with a particular id may never change, ever. If you think of the commit<br>tree as nothing more than a collection of histories, then what we’re really<br>saying is that each history is immutable.</li>
</ul>
<h3 id="global-log"><a href="#global-log" class="headerlink" title="global-log"></a>global-log</h3><ul>
<li>Usage: java gitlet.Main global-log </li>
<li>Description: Like log, except displays information about all commits ever made. The order of the commits does not matter. </li>
<li>Runtime: Linear with respect to the number of commits ever made. </li>
<li>Failure cases: None </li>
<li>Dangerous?: No </li>
<li>Our line count: ~10</li>
</ul>
<h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><ul>
<li>Usage: java gitlet.Main find [commit message] </li>
<li>Description: Prints out the ids of all commits that have the given commit message, one per line. If there are multiple such commits, it prints the ids out on separate lines. The commit message is a single operand; to indicate a multiword message, put the operand in quotation marks, as for the commit command below. </li>
<li>Runtime: Should be linear relative to the number of commits. </li>
<li>Failure cases: If no such commit exists, prints the error message Found no commit with that message. </li>
<li>Dangerous?: No </li>
<li>Differences from real git: Doesn’t exist in real git. Similar effects can be achieved by grepping the output of log. </li>
<li>Our line count: ~15</li>
</ul>
<h3 id="status"><a href="#status" class="headerlink" title="status"></a>status</h3><ul>
<li>Usage: java gitlet.Main status </li>
<li>Description: Displays what branches currently exist, and marks the current branch with a *. Also displays what files have been staged for addition or removal. An example of the exact format it should follow is as follows.<br>&#x3D;&#x3D;&#x3D; Branches &#x3D;&#x3D;&#x3D;<br>*master<br>other-branch<br>&#x3D;&#x3D;&#x3D; Staged Files &#x3D;&#x3D;&#x3D;<br>wug.txt<br>wug2.txt<br>&#x3D;&#x3D;&#x3D; Removed Files &#x3D;&#x3D;&#x3D;<br>goodbye.txt<br>&#x3D;&#x3D;&#x3D; Modifications Not Staged For Commit &#x3D;&#x3D;&#x3D;<br>junk.txt (deleted)<br>wug3.txt (modified)<br>&#x3D;&#x3D;&#x3D; Untracked Files &#x3D;&#x3D;&#x3D;<br>random.stuff<br>There is an empty line between sections. Entries should be listed in<br>lexicographic order, using the Java string-comparison order (the asterisk<br>doesn’t count). A file in the working directory is “modified but not staged”<br>if it is</li>
<li>Tracked in the current commit, changed in the working directory, but not staged; or </li>
<li>Staged for addition, but with different contents than in the working directory; or </li>
<li>Staged for addition, but deleted in the working directory; or </li>
<li>Not staged for removal, but tracked in the current commit and deleted from the working directory. The final category (“Untracked Files”) is for files present in the working directory but neither staged for addition nor tracked. This includes files that have been staged for removal, but then re-created without Gitlet’s knowledge. Ignore any subdirectories that may have been introduced, since Gitlet does not deal with them.<br>The last two sections (modifications not staged and untracked files) are extra<br>credit, worth 1 point. Feel free to leave them blank (leaving just the<br>headers).</li>
<li>Runtime: Make sure this depends only on the amount of data in the working directory plus the number of files staged to be added or deleted plus the number of branches. </li>
<li>Failure cases: None </li>
<li>Dangerous?: No </li>
<li>Our line count: ~45</li>
</ul>
<h3 id="checkout"><a href="#checkout" class="headerlink" title="checkout"></a>checkout</h3><p>Checkout is a kind of general command that can do a few different things<br>depending on what its arguments are. There are 3 possible use cases. In each<br>section below, you’ll see 3 bullet points. Each corresponds to the respective<br>usage of checkout.</p>
<ul>
<li>Usages: <ul>
<li>java gitlet.Main checkout – [file name] </li>
<li>java gitlet.Main checkout [commit id] – [file name] </li>
<li>java gitlet.Main checkout [branch name]</li>
</ul>
</li>
<li>Descriptions: <ul>
<li>Takes the version of the file as it exists in the head commit, the front of the current branch, and puts it in the working directory, overwriting the version of the file that’s already there if there is one. The new version of the file is not staged. </li>
<li>Takes the version of the file as it exists in the commit with the given id, and puts it in the working directory, overwriting the version of the file that’s already there if there is one. The new version of the file is not staged. </li>
<li>Takes all files in the commit at the head of the given branch, and puts them in the working directory, overwriting the versions of the files that are already there if they exist. Also, at the end of this command, the given branch will now be considered the current branch (HEAD). Any files that are tracked in the current branch but are not present in the checked-out branch are deleted. The staging area is cleared, unless the checked-out branch is the current branch (see Failure cases below).</li>
</ul>
</li>
<li>Runtimes: <ul>
<li>Should be linear relative to the size of the file being checked out. </li>
<li>Should be linear with respect to the total size of the files in the commit’s snapshot. Should be constant with respect to any measure involving number of commits. Should be constant with respect to the number of branches.</li>
</ul>
</li>
<li>Failure cases: <ul>
<li>If the file does not exist in the previous commit, abort, printing the error message File does not exist in that commit. </li>
<li>If no commit with the given id exists, print No commit with that id exists. Otherwise, if the file does not exist in the given commit, print the same message as for failure case 1. </li>
<li>If no branch with that name exists, print No such branch exists. If that branch is the current branch, print No need to checkout the current branch. If a working file is untracked in the current branch and would be overwritten by the checkout, print There is an untracked file in the way; delete it, or add and commit it first. and exit; perform this check before doing anything else.</li>
</ul>
</li>
<li>Differences from real git: Real git does not clear the staging area and stages the file that is checked out. Also, it won’t do a checkout that would overwrite or undo changes (additions or removals) that you have staged.<br>A [commit id] is, as described earlier, a hexadecimal numeral. A convenient<br>feature of real Git is that one can abbreviate commits with a unique prefix.<br>For example, one might abbreviate<br>a0da1ea5a15ab613bf9961fd86f010cf74c7ee48<br>as<br>a0da1e<br>in the (likely) event that no other object exists with a SHA-1 identifier that<br>starts with the same six digits. You should arrange for the same thing to<br>happen for commit ids that contain fewer than 40 characters. Unfortunately,<br>using shortened ids might slow down the finding of objects if implemented<br>naively (making the time to find a file linear in the number of objects), so<br>we won’t worry about timing for commands that use shortened ids. We suggest,<br>however, that you poke around in a .git directory (specifically, .git&#x2F;objects)<br>and see how it manages to speed up its search. You will perhaps recognize a<br>familiar data structure implemented with the file system rather than pointers.<br>Only version 3 (checkout of a full branch) modifies the staging area:<br>otherwise files scheduled for addition or removal remain so.</li>
<li>Dangerous?: Yes! </li>
<li>Our line counts: <ul>
<li>~15 </li>
<li>~5 </li>
<li>~15</li>
</ul>
</li>
</ul>
<h3 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h3><ul>
<li>Usage: java gitlet.Main branch [branch name] </li>
<li>Description: Creates a new branch with the given name, and points it at the current head node. A branch is nothing more than a name for a reference (a SHA-1 identifier) to a commit node. This command does NOT immediately switch to the newly created branch (just as in real Git). Before you ever call branch, your code should be running with a default branch called “master”. </li>
<li>Runtime: Should be constant relative to any significant measure. </li>
<li>Failure cases: If a branch with the given name already exists, print the error message A branch with that name already exists. </li>
<li>Dangerous?: No </li>
<li>Our line count: ~10<br>Phew! So that’s the whole idea of branching. Did you catch what’s going on?<br>All that creating a branch does is to give us a new pointer. At any given<br>time, one of these pointers is considered the currently active pointer, or the<br>head pointer (indicated by *). We can switch the currently active head pointer<br>with checkout [branch name]. Whenever we commit, it means we add a new commit<br>in front of the currently active head pointer, even if one is already there.<br>This naturally creates branching behavior.<br>Make sure that the behavior of your branch, checkout, and commit match what<br>we’ve described above. This is pretty core functionality of Gitlet that many<br>other commands will depend upon. If any of this core functionality is broken,<br>very many of our autograder tests won’t work!</li>
</ul>
<h3 id="rm-branch"><a href="#rm-branch" class="headerlink" title="rm-branch"></a>rm-branch</h3><ul>
<li>Usage: java gitlet.Main rm-branch [branch name] </li>
<li>Description: Deletes the branch with the given name. This only means to delete the pointer associated with the branch; it does not mean to delete all commits that were created under the branch, or anything like that. </li>
<li>Runtime: Should be constant relative to any significant measure. </li>
<li>Failure cases: If a branch with the given name does not exist, aborts. Print the error message A branch with that name does not exist. If you try to remove the branch you’re currently on, aborts, printing the error message Cannot remove the current branch. </li>
<li>Dangerous?: No </li>
<li>Our line count: ~15</li>
</ul>
<h3 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h3><ul>
<li>Usage: java gitlet.Main reset [commit id] </li>
<li>Description: Checks out all the files tracked by the given commit. Removes tracked files that are not present in that commit. Also moves the current branch’s head to that commit node. See the intro for an example of what happens to the head pointer after using reset. The [commit id] may be abbreviated as for checkout. The staging area is cleared. The command is essentially checkout of an arbitrary commit that also changes the current branch head. </li>
<li>Runtime: Should be linear with respect to the total size of files tracked by the given commit’s snapshot. Should be constant with respect to any measure involving number of commits. </li>
<li>Failure case: If no commit with the given id exists, print No commit with that id exists. If a working file is untracked in the current branch and would be overwritten by the reset, print There is an untracked file in the way; delete it, or add and commit it first. and exit; perform this check before doing anything else. </li>
<li>Dangerous?: Yes! </li>
<li>Differences from real git: This command is closest to using the –hard option, as in git reset –hard [commit hash]. </li>
<li>Our line count: ~10</li>
</ul>
<h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><ul>
<li>Usage: java gitlet.Main merge [branch name] </li>
<li>Description: Merges files from the given branch into the current branch. This method is a bit complicated, so here’s a more detailed description: <ul>
<li>First consider what might be called the split point of the current branch and the given branch. For example, if master is the current branch and branch is the given branch: Split point </li>
<li>The split point is a latest common ancestor of the current and given branch heads: <ul>
<li>A common ancestor is a commit to which there is a path (of 0 or more parent pointers) from both branch heads. </li>
<li>A latest common ancestor is a common ancestor that is not an ancestor of any other common ancestor. For example, although the leftmost commit in the diagram above is a common ancestor of master and branch, it is also an ancestor of the commit immediately to its right, so it is not a latest common ancestor. If the split point is the same commit as the given branch, then we do nothing; the merge is complete, and the operation ends with the message Given branch is an ancestor of the current branch. If the split point is the current branch, then the effect is to check out the given branch, and the operation ends after printing the message Current branch fast-forwarded. Otherwise, we continue with the steps below.</li>
</ul>
</li>
<li>Any files that have been modified in the given branch since the split point, but not modified in the current branch since the split point should be changed to their versions in the given branch (checked out from the commit at the front of the given branch). These files should then all be automatically staged. To clarify, if a file is “modified in the given branch since the split point” this means the version of the file as it exists in the commit at the front of the given branch has different content from the version of the file at the split point. </li>
<li>Any files that have been modified in the current branch but not in the given branch since the split point should stay as they are. </li>
<li>Any files that have been modified in both the current and given branch in the same way (i.e., both to files with the same content or both removed) are left unchanged by the merge. If a file is removed in both, but a file of that name is present in the working directory that file is not removed from the working directory (but it continues to be absentnot stagedin the merge). </li>
<li>Any files that were not present at the split point and are present only in the current branch should remain as they are. </li>
<li>Any files that were not present at the split point and are present only in the given branch should be checked out and staged. </li>
<li>Any files present at the split point, unmodified in the current branch, and absent in the given branch should be removed (and untracked). </li>
<li>Any files present at the split point, unmodified in the given branch, and absent in the current branch should remain absent. </li>
<li>Any files modified in different ways in the current and given branches are in conflict. “Modified in different ways” can mean that the contents of both are changed and different from other, or the contents of one are changed and the other file is deleted, or the file was absent at the split point and has different contents in the given and current branches. In this case, replace the contents of the conflicted file with the indicated file’s contents) and stage the result. Treat a deleted file in a branch as an empty file. Use straight concatenation here. In the case of a file with no newline at the end, you might well end up with something like this. This is fine; people who produce non-standard, pathological files because they don’t know the difference between a line terminator and a line separator deserve what they get. </li>
<li>Once files have been updated according to the above, and the split point was not the current branch or the given branch, merge automatically commits with the log message Merged [given branch name] into [current branch name]. Then, if the merge encountered a conflict, print the message Encountered a merge conflict. on the terminal (not the log). Merge commits differ from other commits: they record as parents both the head of the current branch (called the first parent) and the head of the branch given on the command line to be merged in. </li>
<li>There is one complication in the definition of the split point. You may have noticed that we referred to “a”, rather than “the” latest common ancestor. This is because there can be more than one in the case of “criss-cross merges”, such as this: Criss-Cross Merge Here, the solid lines are first parents and the dashed lines are the merged-in parents. Both the commits pointed by blue arrows above are latest common ancestors.<br>Here’s how this was created: Branch splits from master in the left most<br>commit. We make initial commits in branch and in master. We then create a new<br>branch temp, splitting from branch. Then we merge master into branch, creating<br>the second bottom commit from the right. This also moves the head of branch<br>forward. We make another commit in master, and then merge temp into master.<br>Then, we make another commit in master and branch. Now if we want to merge<br>branch into master, we have two possible split points: the commits marked by<br>the two blue arrows. You might want to think about why it can make a<br>difference which gets used as the split point. We’ll use the following rule to<br>choose which of multiple possible split points to use:<br>Choose the candidate split point that is closest to the head of the current<br>branch (that is, is reachable by following the fewest parent pointers along<br>some path).<br>If multiple candidates are at the same closest distance, choose any one of<br>them as the split point. (We will make sure that this only happens in our test<br>cases when the resulting merge commit is the same with any of the closest<br>choices.)<br>By the way, we hope you’ve noticed that the set of commits has progressed from<br>a simple sequence to a tree and now, finally, to a full directed acyclic<br>graph.</li>
</ul>
</li>
<li>Runtime: O(NlgN+D), where N is the total number of ancestor commits for the two branches and D is the total amount of data in all the files under these commits. </li>
<li>Failure cases: If there are staged additions or removals present, print the error message You have uncommitted changes. and exit. If a branch with the given name does not exist, print the error message A branch with that name does not exist. If attempting to merge a branch with itself, print the error message Cannot merge a branch with itself. If merge would generate an error because the commit that it does has no changes in it, just let the normal commit error message for this go through. If an untracked file in the current commit would be overwritten or deleted by the merge, print There is an untracked file in the way; delete it, or add and commit it first. and exit; perform this check before doing anything else. </li>
<li>Dangerous?: Yes! </li>
<li>Differences from real git: Real Git does a more subtle job of merging files, displaying conflicts only in places where both files have changed since the split point.<br>Real Git has a different way to decide which of multiple possible split points<br>to use.<br>Real Git will force the user to resolve the merge conflicts before committing<br>to complete the merge. Gitlet just commits the merge, conflicts and all, so<br>that you must use a separate commit to resolve problems.<br>Real Git will complain if there are unstaged changes to a file that would be<br>changed by a merge. You may do so as well if you want, but we will not test<br>that case.</li>
<li>Our line count: ~70</li>
</ul>
<h2 id="Miscellaneous-Things-to-Know-about-the-Project"><a href="#Miscellaneous-Things-to-Know-about-the-Project" class="headerlink" title="Miscellaneous Things to Know about the Project"></a>Miscellaneous Things to Know about the Project</h2><p>Phew! That was a lot of commands to go over just now. But don’t worry, not all<br>commands are created equal. You can see for each command the approximate<br>number of lines we took to do each part (that this only counts code specific<br>to that command – it doesn’t double-count code reused in multiple commands).<br>You shouldn’t worry about matching our solution exactly, but hopefully it<br>gives you an idea about the relative time consumed by each command. Merge is a<br>lengthier command than the others, so don’t leave it for the last minute!<br>This is an ambitious project, and it would not be surprising for you to feel<br>lost as to where to begin. Therefore, feel free to collaborate with others a<br>little more closely than usual, with the following caveats:</p>
<ul>
<li>Acknowledge all collaborators in comments near the beginning of your gitlet&#x2F;Main.java file. </li>
<li>Don’t share specific code; all collaborators must produce their own versions of the algorithms they come up with, so that we can see they differ.<br>By now this spec has given you enough information to get working on the<br>project. But to help you out some more, there are a couple of things you<br>should be aware of:</li>
</ul>
<h2 id="Dealing-with-Files"><a href="#Dealing-with-Files" class="headerlink" title="Dealing with Files"></a>Dealing with Files</h2><p>This project requires reading and writing of files. In order to do these<br>operations, you might find the classes java.io.File and java.nio.file.Files<br>helpful. Actually, you may find various things in the java.io and java.nio<br>packages helpful. Be sure to read the gitlet.Utils package for other things<br>we’ve written for you. If you do a little digging through all of these, you<br>might find a couple of methods that will make the io portion of this project<br>much easier! One warning: If you find yourself using readers, writers,<br>scanners, or streams, you’re making things more complicated than need be.</p>
<h2 id="Serialization-Details"><a href="#Serialization-Details" class="headerlink" title="Serialization Details"></a>Serialization Details</h2><p>If you think about Gitlet, you’ll notice that you can only run one command<br>every time you run the program. In order to successfully complete your<br>version-control system, you’ll need to remember the commit tree across<br>commands. This means you’ll have to design not just a set of classes to<br>represent internal Gitlet structures during execution, but you’ll need a<br>parallel representation as files within your .gitlet directories, which will<br>carry across multiple runs of your program.<br>As indicated earlier, the convenient way to do this is to serialize the<br>runtime objects that you will need to store permanently in files. In Java,<br>this simply involves implementing the java.io.Serializable interface:<br>    import java.io.Serializable;<br>    class MyObject implements Serializable {<br>      …<br>    }<br>—|—<br>This interface has no methods; it simply marks its subtypes for the benefit of<br>some special Java classes for performing I&#x2F;O on objects. For example,<br>    import java.io.File;<br>    import java.io.FileOutputStream;<br>    import java.io.IOException;<br>    import java.io.ObjectOutputStream;<br>    …<br>      MyObject obj &#x3D; ….;<br>      File outFile &#x3D; new File(someFileName);<br>      try {<br>        ObjectOutputStream out &#x3D; new ObjectOutputStream(new FileOutputStream(outFile));<br>        out.writeObject(obj);<br>        out.close();<br>      } catch (IOException excp) {<br>      …<br>      }<br>—|—<br>will convert obj to a stream of bytes and store it in the file whose name is<br>stored in someFileName. The object may then be reconstructed with a code<br>sequence such as<br>    import java.io.File;<br>    import java.io.FileInputStream;<br>    import java.io.IOException;<br>    import java.io.ObjectInputStream;<br>    …<br>      MyObject obj;<br>      File inFile &#x3D; new File(someFileName);<br>      try {<br>        ObjectInputStream inp &#x3D; new ObjectInputStream(new FileInputStream(inFile));<br>        obj &#x3D; (MyObject) inp.readObject();<br>        inp.close();<br>      } catch (IOException | ClassNotFoundException excp) {<br>        …<br>        obj &#x3D; null;<br>      }<br>—|—<br>The Java runtime does all the work of figuring out what fields need to be<br>converted to bytes and how to do so.<br>There is, however, one annoying subtlety to watch out for: Java serialization<br>follows pointers. That is, not only is the object you pass into writeObject<br>serialized and written, but any object it points to as well. If your internal<br>representation of commits, for example, represents the parent commits as<br>pointers to other commit objects, then writing the head of a branch will write<br>all the commits (and blobs) in the entire subgraph of commits into one file,<br>which is generally not what you want. To avoid this, don’t use Java pointers<br>to refer to commits and blobs in your runtime objects, but instead use SHA-1<br>hash strings. Maintain a runtime map between these strings and the runtime<br>objects they refer to. You create and fill in this map while Gitlet is<br>running, but never read or write it to a file.<br>You might find it convenient to have (redundant) pointers commits as well as<br>SHA-1 strings to avoid the bother and execution time required to look them up<br>each time. You can store such pointers in your objects while still avoiding<br>having them written out by declaring them “transient”, as in<br>    private transient MyCommitType parent1;<br>—|—<br>Such fields will not be serialized, and when back in and deserialized, will be<br>set to their default values (null for reference types). You must be careful<br>when reading the objects that contain transient fields back in to set the<br>transient fields to appropriate values.<br>Unfortunately, looking at the serialized files your program has produced with<br>a text editor (for debugging purposes) would be rather unrevealing; the<br>contents are encoded in Java’s private serialization encoding. We have<br>therefore provided a simple debugging utility program you might find useful:<br>gitlet.DumpObj. See the Javadoc comment on gitlet&#x2F;DumpObj.java for details.</p>
<h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><p>As usual, testing is part of the project. Be sure to provide your own<br>integration tests for each of the commands, covering all the specified<br>functionality. Also add unit tests to UnitTest.java or other testing classes<br>it invokes in its main method.<br>We have provided a testing program that makes it relatively easy to write<br>integration tests: testing&#x2F;tester.py. As for Project #2, this interprets<br>testing files with an .in extension.<br>Within the testing subdirectory, running the command<br>    python3 tester.py –verbose FILE.in …<br>where FILE.in … is a list of specific .in files you want to check, will<br>provide additional information, such as what your program is outputting. The<br>command<br>    python3 tester.py –verbose –keep FILE.in<br>will, in addition, keep around the directory that tester.py produces so that<br>you can examine its files at the point the tester script detected an error.<br>In effect, the tester implements a very simple domain-specific language (DSL)<br>that contains commands to</p>
<ul>
<li>Set up or remove files from a testing directory; </li>
<li>Run java gitlet.Main; </li>
<li>Check the output of Gitlet against a specific output or a regular expression describing possible outputs; </li>
<li>Check the presence, absence, and contents of files. Running the command<br>python3 testing&#x2F;tester.py<br>(with no operands, as shown) will provide a message documenting this language.<br>We’ve provided some examples in the directory testing&#x2F;samples. Don’t put your<br>own tests in that subdirectory; the readers will not count those as your<br>tests. Put all your .in files immediately within the testing directory.<br>As usual, we will test your code on the the instructional machines, so do be<br>sure it works there! You can tell us how “it works on my machine” until you<br>are blue in the face; we heartlessly won’t care about that.<br>We’ve added a few things to the makefile to adjust for differences in people’s<br>setups. If your system’s command for invoking Python 3 is simply python, you<br>can still use our makefile unchanged by using<br>make PYTHON&#x3D;python check<br>You can pass additional flags to tester.py with, for example,<br>make TESTER_FLAGS&#x3D;”–show&#x3D;all –keep”</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">SafePoker</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://saferman.github.io/2021/04/20/Java%E4%BB%A3%E5%86%99%EF%BC%9ACS61BGitlet/">http://saferman.github.io/2021/04/20/Java%E4%BB%A3%E5%86%99%EF%BC%9ACS61BGitlet/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">SafePoker</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Java%E4%BB%A3%E5%86%99/">
                                    <span class="chip bg-color">Java代写</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s12 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="wechat">
                        <img src="/medias/newqrcode.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/04/20/JavaScript%E4%BB%A3%E5%86%99%EF%BC%9ACAB230CirmeStatisticsWebApplication/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="JavaScript代写：CAB230 Cirme Statistics Web Application">
                        
                        <span class="card-title">JavaScript代写：CAB230 Cirme Statistics Web Application</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-04-20
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            SafePoker
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/JavaScript%E4%BB%A3%E5%86%99/">
                        <span class="chip bg-color">JavaScript代写</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/04/19/Database%E4%BB%A3%E5%86%99%EF%BC%9ACSC370Database/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/7.jpg" class="responsive-img" alt="Database代写：CSC370 Database">
                        
                        <span class="card-title">Database代写：CSC370 Database</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-04-19
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            SafePoker
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Database%E4%BB%A3%E5%86%99/">
                        <span class="chip bg-color">Database代写</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2018-2024</span>
            
            <a href="/contact" target="_blank">SafePoker</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">


    <a href="mailto:hhh@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
