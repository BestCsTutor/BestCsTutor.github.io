<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="C++代写：INFO9202 Choice Of Volatility Market, 留学生CS|辅导|代写">
    <meta name="description" content="使用来自加密货币期权交易所的即时报价数据来进行预测。![cryptocurrency option exchange](https://www.the-pool.com/wp-content&amp;#x2F;uploads&amp;#x2F;2020&amp;#">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>C++代写：INFO9202 Choice Of Volatility Market | 留学生CS|辅导|代写</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 7.1.1"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">留学生CS|辅导|代写</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>辅导案例集合</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/comment" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>用户评价</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>联系我</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">留学生CS|辅导|代写</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			辅导案例集合
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/comment" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			用户评价
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			联系我
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/9.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">C++代写：INFO9202 Choice Of Volatility Market</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/C-%E4%BB%A3%E5%86%99/">
                                <span class="chip bg-color">C++代写</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2019-07-08
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>使用来自加密货币期权交易所的即时报价数据来进行预测。<br>![cryptocurrency option exchange](<a target="_blank" rel="noopener" href="https://www.the-pool.com/wp-">https://www.the-pool.com/wp-</a><br>content&#x2F;uploads&#x2F;2020&#x2F;07&#x2F;Best-Cryptocurrency-Exchange-Platforms-<br>in-2020-780x454.jpg)</p>
<h2 id="Proposal"><a href="#Proposal" class="headerlink" title="Proposal"></a>Proposal</h2><p>We would like to consume tick data from a cryptocurrency option exchange<br>(Deribit) to build our choice of volatility market representation updated at a<br>given time frequency.<br>The historical raw tick data is provided as csv files, and each tick (one row<br>in the csv file) contains the below fields.<br>The fields relevant to us are:</p>
<ul>
<li>contractName: the symbol of the exchange traded contract: Underlying_ExpiryDate_Strike_OptionTYpe </li>
<li>time: timestamp of the update, in UTC. </li>
<li>msgType: update or snap <ul>
<li>update: a best level update of a particular instrument, an update message should be applied on top of the currently maintained snapshot </li>
<li>snap: a snapshot of the whole market, when a snapshot is received, the locally maintained snapshot can be disgarded to avoid error accumulation. When we process a historical data csv file, we need to disgard all updates before the first snapshot.</li>
</ul>
</li>
<li>bestBid: best bid price in unit of BTC (bitcoin) </li>
<li>bestBidAmount: best bid notional, in unit of BTC. </li>
<li>bestBidIV: implied volatility from best bid price. </li>
<li>bestAsk: best ask price in unit of BTC (bitcoin) </li>
<li>bestAskAmount: best ask notional, in unit of BTC. </li>
<li>bestAskIV: implied volatility from best ask price. </li>
<li>markPrice: we can consider this as the mid price. </li>
<li>markIV: implied volatility from the mark price. </li>
<li>underlyingIndex: the underlying futures contract name. Some underlying index starts with ‘SYN.’, this indicate that the underlying Futures contract is not listed, so the underlying Futures price could be an interpolated price. For this project, we do not need to worry about whether the underlying index is synthetic or not. </li>
<li>underlyingPrice: the price underlying futures contract. </li>
<li>lasstPrice: last transaction price of the contract. </li>
<li>open_interest: current open interest of the instrument, in unit of BTC.<br>We can ignore the rest of the fields in this project.</li>
</ul>
<h2 id="Step-1-Read-input-events-from-CSV"><a href="#Step-1-Read-input-events-from-CSV" class="headerlink" title="Step 1. Read input events from CSV"></a>Step 1. Read input events from CSV</h2><p>The first step is to complete the CsvFeeder class, that consumes the tick<br>event data. The CsvFeeder class needs to be constructed using the below<br>constructor<br>    CsvFeeder::CsvFeeder(const std::string ticker_filename,<br>      FeedListener feed_listener,<br>      std::chrono::minutes interval,<br>      TimerListener timer_listener)<br>—|—  </p>
<ul>
<li>ticker_filename: the filename of the input csv file, </li>
<li>feed_listener: the function to be called inside Step(), after an update message is loaded, </li>
<li>interval: the time interval to call timer_listener, </li>
<li>timer_listener: the function to be called at a given frequency.<br>FeedListener and TimerListener are our own types defined as follows.<br>using FeedListener &#x3D; std::function[void(const Msg&amp; msg)];<br>using TimerListener &#x3D; std::function[void(uint64_t ms_now)];<br>—|—</li>
</ul>
<p>The class Msg is given in Msg.h. You may modify or extend it. Your main job<br>for step 1 is to complete the step-wise processing functions:<br>    bool ReadNextMsg(std::ifstream&amp; file, Msg&amp; msg) {<br>      if (file.eof()) {<br>        return false;<br>      }<br>      &#x2F;&#x2F; TODO: your implementation to read file and create the next Msg into the variable msg<br>      return true;<br>    }<br>—|—<br>Note that multiple rows in the csv files that has exactly the same timestamp<br>is considered as one Msg. ReadNextMsg() should load a complete Msg until<br>timestamp changes. It is possible that timestamp is not in strictly increasing<br>order. But we do not need to make special treatment for this.<br>Note that the time stamp is parsed to unix epoch time ( <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Unix_time"><br>https://en.wikipedia.org/wiki/Unix_time
</a> ) in millisecond precision, which<br>is represented as a uint64_t. You can use the function TimeToUnixMS<br>implemented in CsvFeeder.cpp to parse the input string to the Unix epoch<br>timestamp. A test script test_ts_parse.cpp is there for you to test what the<br>parser deos. You can build it using make test_ts_parser.<br>You may use the function getline ( <a target="_blank" rel="noopener" href="https://www.cplusplus.com/reference/istream/istream/getline/"><br>https://www.cplusplus.com/reference/istream/istream/getline/
</a> ) to read a<br>line from the file, and parse the line in your code by separating each field<br>with “,”. We have also added a constructor to datetime_t that takes a unix<br>epoch timestamp in second (note that the unix is in second, so if you use it<br>with millisecond timestamp, you need to divide it by 1000) to construct our<br>own type datetime_t.<br>It is also possible that certain fields are empty for some ticks. In that<br>case, you can set the field to NaN using <code>std::numeric_limits&lt;double&gt;::quiet_NaN()</code> defined in  header.<br>Read step1.cpp, which contains a dummy FeedListener that prints basic<br>information of the Msg given, and TimerListener that simply prints the<br>timestamp. Build step1 using make step1 under the project folder. The run it:<br>bin&#x2F;step1.out  . Without the implementation of ReadNextMsg function, the code<br>will compile but will not function properly. Once ReadNextMsg is correctly<br>implemented, step1 should process the input csv file and print out basic<br>information of the input events.</p>
<h2 id="Step-2-Maintain-the-latest-market-snapshot"><a href="#Step-2-Maintain-the-latest-market-snapshot" class="headerlink" title="Step 2: Maintain the latest market snapshot"></a>Step 2: Maintain the latest market snapshot</h2><p>VolSurfBuilder keeps track of the latest snapshot of the option market using<br>the member variable <code>std::map&lt;std::string, TickData&gt; currentSurfaceRaw</code> the<br>latest tick data of all option contracts in the market. Implement the below<br>two functions in VolSurfBuilder.h:<br>    template<class Smile><br>    void VolSurfBuilder<Smile>::Process(const Msg&amp; msg) {<br>      if (msg.isSnap) {<br>        &#x2F;&#x2F; discard currently maintained market snapshot, and construct a new copy based on the input Msg<br>      } else {<br>        &#x2F;&#x2F; update the currently maintained market snapshot<br>      }<br>    }<br>    template<class Smile><br>    void VolSurfBuilder<Smile>::PrintInfo() {<br>      &#x2F;&#x2F; TODO: you may print out information about VolSurfBuilder’s currentSnapshot to test<br>    }<br>—|—<br>Process is called by FeedListener in step2.cpp. Every time VolSurfBuilder<br>takes a Msg,, it checks if it is a snapshot or an update. If the message is a<br>snapshot, it will discard the previously maintained market, to avoid error<br>accumulation. If the message is an update, it will just apply the updatees to<br>the currently maintained market snapshot.<br>PrintInfo is called by TimerListener in step2.cpp. It should pprint out the<br>information of the market snapshot at the given interval.<br>Test step2.cpp with make step2 and <code>bin/step2.out &lt;test_csv_filename&gt;</code> .<br>Note: the class VolSurfBuilder is a template class that could take different<br>smile models.</p>
<h2 id="Step-3-Fit-smile-at-regular-time-interval-and-stream-the-marks-and"><a href="#Step-3-Fit-smile-at-regular-time-interval-and-stream-the-marks-and" class="headerlink" title="Step 3: Fit smile at regular time interval, and stream the marks and"></a>Step 3: Fit smile at regular time interval, and stream the marks and</h2><p>fitting error to output files<br>The raw snapshot of the market contains strike to price&#x2F;implied volatility<br>pairs. We want to fit our own volatility smile models to the raw market data<br>so it is easier for pricing and signal research. The smile model we want to<br>use here is cubic spline, implemented as CubicSmile (see lecture notes for<br>more details of this smile model). The parameters of the model will be ATMVOL,<br>BF25, RR25, BF10, and RR10 for each expiry date.<br>Complete the FitSmiles function in VolSurfBuilder.h. It groups the market tick<br>data by expiry date, pass the data of each expiry to the FitSmile function in<br>the smile model to fit the model to the market data, and calculate the fitting<br>error. The fitting error is defined as the mean (or weighted) square error<br>(see <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Mean_squared_error"> https://en.wikipedia.org/wiki/Mean_squared_error
</a> and lecture notes) of all<br>the contracts’ mid implied volatility versus the model volatility at the<br>corresponding strike. For simplicity, at this step we can take the average of<br>BestBidIV and BestAskIV for fitting, without looking at other fields. You may<br>start with equal weights for all the contracts, and refine weights later<br>(optional). If you choose to assign different weights to different contracts,<br>please describe clearly the formula for the weights in the report.<br>FitSmiles is called by TimerListener in step3.cpp to generate the volatility<br>surface on our specified time frequency. You should also complete the<br>time_listener in step3.cpp that streams the volatility marks and fitting<br>errors to the output file. Below is the example format of the output csv file:<br>    TIME,EXPIRY,FUT_PRICE,ATM,BF25,RR25,BF10,RR10<br>    2022-04-18T00:00:00.139Z,29-APR-2022,38667.63,0.6,0.02,0.05,0.0335,0.067<br>Implement the FitSmile function in CubicSmile.h. The function returns a<br>CubicSmile that fits the tick data of a given expiry date. The fitting<br>algorithm could be a least square fit using L-BFGS ( <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Limited-memory_BFGS"><br>https://en.wikipedia.org/wiki/Limited-memory_BFGS
</a> ). The project folder<br>includes a header-only library for L-BFGS ( <a target="_blank" rel="noopener" href="https://lbfgspp.statr.me/"> https://lbfgspp.statr.me/
</a> ) in the Solver subfolder. You can look at the<br>test_lbfgs build rule in Makefile for how to use it. You may also use<br>algorithm of your own choice (it can also be simple algorithm that does not<br>involve a solver) to fit the input data.<br>To build step 3: <code>make step3</code><br>To run step 3: <code>bin/step3 &lt;input.csv&gt; &lt;output.csv&gt;</code><br>[Bonus point] Consider make minor changes to the CubicSmile model or fitting<br>error measurement to improve the fitting quality. You should describe the<br>rationale and test results if you do so.</p>
<h2 id="Project-Submission-and-Evaluation-Criteria"><a href="#Project-Submission-and-Evaluation-Criteria" class="headerlink" title="Project Submission and Evaluation Criteria"></a>Project Submission and Evaluation Criteria</h2><p>Zip your project PDF report with your project source code folder, submit a<br>single zip file. Indicate your group members in the report. In the report, you<br>shoud describe your test cases and show the test results in tables or charts.<br>Tables or charts does not have to be generated using C++. Only one member of<br>the group needs to submit the report on eLearn.<br>The evaluation of the project is based on</p>
<ul>
<li>Clearness of the presentation </li>
<li>Thoroughness of the tests </li>
<li>Correctness, readability, and performance of the code </li>
<li>Smile fitting error</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">SafePoker</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://saferman.github.io/2019/07/08/C++%E4%BB%A3%E5%86%99%EF%BC%9AINFO9202ChoiceOfVolatilityMarket/">http://saferman.github.io/2019/07/08/C++%E4%BB%A3%E5%86%99%EF%BC%9AINFO9202ChoiceOfVolatilityMarket/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">SafePoker</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/C-%E4%BB%A3%E5%86%99/">
                                    <span class="chip bg-color">C++代写</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s12 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="wechat">
                        <img src="/medias/newqrcode.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2019/07/09/Java%E4%BB%A3%E5%86%99%EF%BC%9AKIT101SentenceCipher/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/6.jpg" class="responsive-img" alt="Java代写：KIT101 Sentence Cipher">
                        
                        <span class="card-title">Java代写：KIT101 Sentence Cipher</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2019-07-09
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            SafePoker
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Java%E4%BB%A3%E5%86%99/">
                        <span class="chip bg-color">Java代写</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2019/07/07/OperatingSystem%E4%BB%A3%E5%86%99%EF%BC%9ACOMP3080MemoryAllocation/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/15.jpg" class="responsive-img" alt="Operating System代写：COMP3080 Memory Allocation">
                        
                        <span class="card-title">Operating System代写：COMP3080 Memory Allocation</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2019-07-07
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            SafePoker
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Operating-System%E4%BB%A3%E5%86%99/">
                        <span class="chip bg-color">Operating System代写</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2018-2024</span>
            
            <a href="/contact" target="_blank">SafePoker</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">


    <a href="mailto:hhh@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
